<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tutorial: Using AWS Lambda with the Mobile SDK for Android - AWS Lambda</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="with-android-example" /><meta name="default_state" content="with-android-example" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/with-android-example.html" /><meta name="description" content="In this tutorial, you create a simple Android mobile application that uses Amazon Cognito to get credentials and invokes a Lambda function." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Lambda" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/with-android-example.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/with-android-example.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/with-android-example.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/with-android-example.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/with-android-example.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/with-android-example.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/with-android-example.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/with-android-example.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/with-android-example.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/with-android-example.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/with-android-example.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/with-android-example.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/with-android-example.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/with-android-example.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/with-android-example.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/with-android-example.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/with-android-example.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/with-android-example.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/with-android-example.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/with-android-example.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/with-android-example.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/with-android-example.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS Lambda" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lambda'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Tutorial: Using AWS Lambda with the Mobile SDK for Android" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Tutorial: Using AWS Lambda with the Mobile SDK for Android - AWS Lambda</title><meta name="pdf" content="/pdfs/lambda/latest/dg/lambda-dg.pdf#with-android-example" /><meta name="rss" content="lambda-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/with-android-example.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/with-android-example.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/with-android-example.html" /><meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS Lambda applications",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/deploying-lambda-apps.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Invoking Lambda functions with the AWS Mobile SDK for Android",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/with-on-demand-custom-android.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Tutorial: Using AWS Lambda with the Mobile SDK for Android",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/with-on-demand-custom-android.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lambda/latest/dg/lambda-dg.pdf#with-android-example" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div><div id="page-toc-src"><a href="#with-android-prepare">Prerequisites</a><a href="#with-android-create-execution-role">Create the execution role</a><a href="#with-android-example-create-function">Create the function</a><a href="#walkthrough-on-demand-custom-android-events-adminuser-create-test-function-upload-zip-test-manual-invoke">Test the Lambda function</a><a href="#with-on-demand-custom-android-create-cognito-pool">Create an Amazon Cognito identity pool </a><a href="#with-ondemand-android-mobile-create-app">Create an Android application</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="with-android-example">Tutorial: Using AWS Lambda with the Mobile SDK for Android</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>In this tutorial, you create a simple Android mobile application that uses Amazon Cognito to get credentials and invokes
    a Lambda function.</p><p>The mobile application retrieves AWS credentials from an Amazon Cognito identity pool and uses them to invoke a Lambda
    function with an event that contains request data. The function processes the request and returns a response to the
    front-end.</p>
    <h2 id="with-android-prepare">Prerequisites</h2>
     <p>This tutorial assumes that you have some knowledge of basic Lambda operations and the Lambda console. If you
      haven't already, follow the instructions in <a href="./getting-started.html#getting-started-create-function">Create a Lambda function with the console</a> to create your first Lambda function.</p>
     <p>To complete the following steps, you need the <a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html">AWS Command Line Interface (AWS CLI) version 2</a>. Commands and the expected output are listed in separate blocks:</p>
    <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight"><code class="userinput">aws --version</code></code></pre>
    <p>You should see the following output:</p>
    <pre class="programlisting"><div class="code-btn-container"></div><code class="">aws-cli/2.0.57 Python/3.7.4 Darwin/19.6.0 exe/x86_64</code></pre>
    <p>For long commands, an escape character (<code class="code">\</code>) is used to split a command over multiple lines.</p>
    <p>On Linux and macOS, use your preferred shell and package manager.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In Windows, some Bash CLI commands that you commonly use with Lambda (such as <code class="code">zip</code>) are not supported by the operating system's built-in terminals. 
    To get a Windows-integrated version of Ubuntu and Bash, <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener noreferrer" target="_blank"><span>install the Windows Subsystem for Linux</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
     Example CLI commands in this guide use Linux formatting. Commands which include inline JSON documents must be reformatted if you are using the Windows CLI.
    </p></div></div>
    
   
    <h2 id="with-android-create-execution-role">Create the execution role</h2>
    <p>Create the <a href="./lambda-intro-execution-role.html">execution role</a> that gives your function
      permission to access AWS resources.</p>
    <div class="procedure"><h6>To create an execution role</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/iam/home#/roles" rel="noopener noreferrer" target="_blank"><span>roles page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the IAM console.</p>
      </li><li>
        <p>Choose <b>Create role</b>.</p>
      </li><li>
        <p>Create a role with the following properties.</p>
        <div class="itemizedlist">
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><b>Trusted entity</b> – <b>AWS Lambda</b>.</p>
          </li><li class="listitem">
            <p><b>Permissions</b> – <b>AWSLambdaBasicExecutionRole</b>.</p>
          </li><li class="listitem">
            <p><b>Role name</b> – <code class="userinput">lambda-android-role</code>.</p>
          </li></ul></div>
      </li></ol></div>
    <p>The <b>AWSLambdaBasicExecutionRole</b> policy has the permissions that the function needs to
      write logs to CloudWatch Logs.</p>
   
    <h2 id="with-android-example-create-function">Create the function</h2>
    
    <p>The following example uses data to generate a string response.</p>
    
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For sample code in other languages, see <a href="./with-android-create-package.html">Sample function code</a>.</p></div></div>
    <div class="example"><h6>Example index.js</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nodejs ">exports.handler = function(event, context, callback) <span>{</span>
   console.log("Received event: ", event);
   var data = <span>{</span>
       "greetings": "Hello, " + event.firstName + " " + event.lastName + "."
   };
   callback(null, data);
}</code></pre></div></div>
    
    <div class="procedure"><h6>To create the function</h6><ol><li>
        <p>Copy the sample code into a file named <code>index.js</code>.</p>
      </li><li>
        <p>Create a deployment package.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">zip function.zip index.js</code></code></pre>
      </li><li>
        <p>Create a Lambda function with the <code class="code">create-function</code> command.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda create-function --function-name AndroidBackendLambdaFunction \
--zip-file fileb://function.zip --handler index.handler --runtime nodejs16.x \
--role arn:aws:iam::<code class="replaceable">111122223333</code>:role/lambda-android-role</code></code></pre>
      </li></ol></div>
   
    <h2 id="walkthrough-on-demand-custom-android-events-adminuser-create-test-function-upload-zip-test-manual-invoke">Test the Lambda function</h2>
    <p>Invoke the function manually using the sample event data.</p>
    <div class="procedure"><h6>To test the Lambda function (AWS CLI)</h6><ol><li>
        <p> Save the following sample event JSON in a file, <code class="code">input.txt</code>. </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>   "firstName": "<em>first-name</em>",   "lastName": "<em>last-name</em>" }</code></pre>
      </li><li>
        <p> Run the following <code class="code">invoke</code> command:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda  invoke --function-name AndroidBackendLambdaFunction \
--payload file://<code class="replaceable">file-path</code>/input.txt outputfile.txt</code></code></pre>
        <p>The <b>cli-binary-format</b> option is required if you're using AWS CLI version 2. To make this the default setting, run <code class="code">aws configure set cli-binary-format raw-in-base64-out</code>. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-options.html#cli-configure-options-list">AWS CLI supported global command line options</a>.</p>
      </li></ol></div>
   
    <h2 id="with-on-demand-custom-android-create-cognito-pool">Create an Amazon Cognito identity pool </h2>
    <p>In this section, you create an Amazon Cognito identity pool. The identity pool has two IAM roles. You update the
      IAM role for unauthenticated users and grant permissions to run the
        <code class="code">AndroidBackendLambdaFunction</code> Lambda function. </p>
    <p>For more information about IAM roles, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html">IAM roles</a> in
      the <em>IAM User Guide</em>. For more information about Amazon Cognito services, see the <a href="https://aws.amazon.com/cognito/" rel="noopener noreferrer" target="_blank"><span>Amazon Cognito</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> product detail page. </p>
    <div class="procedure"><h6>To create an identity pool</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/cognito" rel="noopener noreferrer" target="_blank"><span>Amazon Cognito console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>
      </li><li>
        <p>Create a new identity pool called <code class="code">JavaFunctionAndroidEventHandlerPool</code>. Before you follow the
          procedure to create an identity pool, note the following:</p>
        <div class="itemizedlist">
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>The identity pool you are creating must allow access to unauthenticated identities because our example
              mobile application does not require a user log in. Therefore, make sure to select the <b>Enable
                access to unauthenticated identities</b> option.</p>
          </li><li class="listitem">
            <p>Add the following statement to the permission policy associated with the unauthenticated identities. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
        "Effect": "Allow",
        "Action": [
            "lambda:InvokeFunction"
        ],
        "Resource": [
           "arn:aws:lambda:us-east-1:<code class="replaceable">111122223333</code>:function:AndroidBackendLambdaFunction"
        ]
}</code></pre>
            <p>The resulting policy will be as follows:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Action":[
            "mobileanalytics:PutEvents",
            "cognito-sync:*"
         ],
         "Resource":[
            "*"
         ]
      },
      <span>{</span>
         "Effect":"Allow",
         "Action":[
            "lambda:invokefunction"
         ],
         "Resource":[
            "arn:aws:lambda:us-east-1:<code class="replaceable">account-id</code>:function:AndroidBackendLambdaFunction"
         ]
      }
   ]
}</code></pre>
          </li></ul></div>
        <p>For instructions about how to create an identity pool, log in to the <a href="https://console.aws.amazon.com/cognito/home" rel="noopener noreferrer" target="_blank"><span>Amazon Cognito console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and follow the <b>New Identity
            Pool</b> wizard.</p>
      </li><li>
        <p>Note the identity pool ID. You specify this ID in your mobile application you create in the next section.
          The app uses this ID when it sends request to Amazon Cognito to request for temporary security credentials.</p>
      </li></ol></div>
   
    <h2 id="with-ondemand-android-mobile-create-app">Create an Android application</h2>
    <p>Create a simple Android mobile application that generates events and invokes Lambda functions by passing the
      event data as parameters. </p>
    <p>The following instructions have been verified using Android studio.</p>
    <div class="procedure"><ol><li>
        <p>Create a new Android project called <code class="code">AndroidEventGenerator</code> using the following
          configuration:</p>
        <div class="itemizedlist">
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>Select the <b>Phone and Tablet</b> platform.</p>
          </li><li class="listitem">
            <p>Choose <b>Blank Activity</b>.</p>
          </li></ul></div>
      </li><li>
        <p>In the build.gradle (<code>Module:app</code>) file, add the following in the
            <code class="code">dependencies</code> section:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">compile 'com.amazonaws:aws-android-sdk-core:2.2.+'
compile 'com.amazonaws:aws-android-sdk-lambda:2.2.+'</code></pre>
      </li><li>
        <p>Build the project so that the required dependencies are downloaded, as needed.</p>
      </li><li>
        <p>In the Android application manifest (<code>AndroidManifest.xml</code>), add the following
          permissions so that your application can connect to the Internet. You can add them just before the
            <code class="code">&lt;/manifest&gt;</code> end tag.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">&lt;uses-permission android:name="android.permission.INTERNET" /&gt;
&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;</code></pre>
      </li><li>
        <p>In <code class="code">MainActivity</code>, add the following imports:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">import com.amazonaws.mobileconnectors.lambdainvoker.*;
import com.amazonaws.auth.CognitoCachingCredentialsProvider;
import com.amazonaws.regions.Regions;</code></pre>
      </li><li>
        <p>In the <code class="code">package</code> section, add the following two classes (<code class="code">RequestClass</code> and
            <code class="code">ResponseClass</code>). Note that the POJO is same as the POJO you created in your Lambda function in
          the preceding section.</p>
        <div class="itemizedlist">
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><code class="code">RequestClass</code>. The instances of this class act as the POJO (Plain Old Java Object) for
              event data which consists of first and last name. If you are using Java example for your Lambda function
              you created in the preceding section, this POJO is same as the POJO you created in your Lambda function
              code.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">package <code class="replaceable">com.example....lambdaeventgenerator</code>;
public class RequestClass <span>{</span>
    String firstName;
    String lastName;

    public String getFirstName() <span>{</span>
        return firstName;
    }

    public void setFirstName(String firstName) <span>{</span>
        this.firstName = firstName;
    }

    public String getLastName() <span>{</span>
        return lastName;
    }

    public void setLastName(String lastName) <span>{</span>
        this.lastName = lastName;
    }

    public RequestClass(String firstName, String lastName) <span>{</span>
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public RequestClass() <span>{</span>
    }
}</code></pre>
          </li><li class="listitem">
            <p><code class="code">ResponseClass</code></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">package <code class="replaceable">com.example....lambdaeventgenerator</code>;
public class ResponseClass <span>{</span>
    String greetings;

    public String getGreetings() <span>{</span>
        return greetings;
    }

    public void setGreetings(String greetings) <span>{</span>
        this.greetings = greetings;
    }

    public ResponseClass(String greetings) <span>{</span>
        this.greetings = greetings;
    }

    public ResponseClass() <span>{</span>
    }
}</code></pre>
          </li></ul></div>
      </li><li>
        <p>In the same package, create interface called <code class="code">MyInterface</code> for invoking the
            <code class="code">AndroidBackendLambdaFunction</code> Lambda function. </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">package <code class="replaceable">com.example.....lambdaeventgenerator</code>;
import com.amazonaws.mobileconnectors.lambdainvoker.LambdaFunction;
public interface MyInterface <span>{</span>

    /**
     * Invoke the Lambda function "AndroidBackendLambdaFunction".
     * The function name is the method name.
     */
    @LambdaFunction
     ResponseClass AndroidBackendLambdaFunction(RequestClass request);

}</code></pre>
        <p>The <code class="code">@LambdaFunction</code> annotation in the code maps the specific client method to the same-name
          Lambda function.</p>
      </li><li>
        <p>To keep the application simple, we are going to add code to invoke the Lambda function in the
            <code class="code">onCreate()</code> event handler. In <code class="code">MainActivity</code>, add the following code toward the end
          of the <code class="code">onCreate()</code> code.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">// Create an instance of CognitoCachingCredentialsProvider
CognitoCachingCredentialsProvider cognitoProvider = new CognitoCachingCredentialsProvider(
        this.getApplicationContext(), "<code class="replaceable">identity-pool-id</code>", Regions.US_WEST_2);

// Create LambdaInvokerFactory, to be used to instantiate the Lambda proxy.
LambdaInvokerFactory factory = new LambdaInvokerFactory(this.getApplicationContext(),
        Regions.US_WEST_2, cognitoProvider);

// Create the Lambda proxy object with a default Json data binder.
// You can provide your own data binder by implementing
// LambdaDataBinder.
final MyInterface myInterface = factory.build(MyInterface.class);

RequestClass request = new RequestClass("John", "Doe");
// The Lambda function invocation results in a network call.
// Make sure it is not called from the main thread.
new AsyncTask&lt;RequestClass, Void, ResponseClass&gt;() <span>{</span>
    @Override
    protected ResponseClass doInBackground(RequestClass... params) <span>{</span>
        // invoke "echo" method. In case it fails, it will throw a
        // LambdaFunctionException.
        try <span>{</span>
            return myInterface.AndroidBackendLambdaFunction(params[0]);
        } catch (LambdaFunctionException lfe) <span>{</span>
            Log.e("Tag", "Failed to invoke echo", lfe);
            return null;
        }
    }

    @Override
    protected void onPostExecute(ResponseClass result) <span>{</span>
        if (result == null) <span>{</span>
            return;
        }

        // Do a toast
        Toast.makeText(MainActivity.this, result.getGreetings(), Toast.LENGTH_LONG).show();
    }
}.execute(request);</code></pre>
      </li><li>
        <p>Run the code and verify it as follows:</p>
        <div class="itemizedlist">
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>The <code class="code">Toast.makeText()</code> displays the response returned.</p>
          </li><li class="listitem">
            <p>Verify that CloudWatch Logs shows the log created by the Lambda function. It should show the event data (first
              name and last name). You can also verify this in the AWS Lambda console.</p>
          </li></ul></div>
      </li></ol></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./with-on-demand-custom-android.html">Mobile SDK for Android</div><div id="next" class="next-link" accesskey="n" href="./with-android-create-package.html">Sample code</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/with-android-example.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/with-android-example.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>