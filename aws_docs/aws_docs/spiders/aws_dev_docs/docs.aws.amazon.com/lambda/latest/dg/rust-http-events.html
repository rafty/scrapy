<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Processing HTTP events with Rust - AWS Lambda</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="rust-http-events" /><meta name="default_state" content="rust-http-events" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/rust-http-events.html" /><meta name="description" content="This page describes how to handle HTTP events with Rust functions." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Lambda" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/rust-http-events.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/rust-http-events.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/rust-http-events.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/rust-http-events.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/rust-http-events.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/rust-http-events.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/rust-http-events.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/rust-http-events.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/rust-http-events.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/rust-http-events.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/rust-http-events.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/rust-http-events.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/rust-http-events.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/rust-http-events.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/rust-http-events.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/rust-http-events.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/rust-http-events.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/rust-http-events.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/rust-http-events.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/rust-http-events.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/rust-http-events.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/rust-http-events.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS Lambda" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lambda'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Processing HTTP events with Rust" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Processing HTTP events with Rust - AWS Lambda</title><meta name="pdf" content="/pdfs/lambda/latest/dg/lambda-dg.pdf#rust-http-events" /><meta name="rss" content="lambda-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/rust-http-events.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/rust-http-events.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/rust-http-events.html" /><meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing,Rust Lambda,Rust functions,Rust Lambda function,Rust Lambda events,Rust events" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Building Lambda functions with Rust",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-rust.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Processing HTTP events with Rust",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-rust.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lambda/latest/dg/lambda-dg.pdf#rust-http-events" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="rust-http-events">Processing HTTP events with Rust</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The <a href="https://github.com/awslabs/aws-lambda-rust-runtime" rel="noopener noreferrer" target="_blank"><span>Rust runtime client</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> is an experimental package. It is subject to change and intended only for evaluation purposes.</p></div></div><p>Amazon API Gateway APIs, Application Load Balancers, and <a href="./lambda-urls.html">Lambda function URLs</a> can send HTTP events to Lambda. You can use
    the <a href="https://crates.io/crates/aws_lambda_events" rel="noopener noreferrer" target="_blank"><span>aws_lambda_events</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> crate
    from crates.io to process events from these sources.</p><div class="example"><h6>Example â€” Handle API Gateway proxy request</h6><div class="example-contents"><p>Note the following:</p><div class="itemizedlist">
     
     
  <ul class="itemizedlist"><li class="listitem">
      <p><code class="code">use aws_lambda_events::apigw::<span>{</span>ApiGatewayProxyRequest, ApiGatewayProxyResponse}</code>:
        The <a href="https://crates.io/crates/aws-lambda-events" rel="noopener noreferrer" target="_blank"><span>aws_lambda_events</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> crate
        includes many Lambda events. To reduce compilation time, use feature flags to activate the
        events you need. Example:
        <code class="code">aws_lambda_events = <span>{</span> version = "0.8.3", default-features = false, features = ["apigw"] }</code>.</p>
    </li><li class="listitem">
      <p><code class="code">use http::HeaderMap</code>: This import requires you to add the <a href="https://crates.io/crates/http" rel="noopener noreferrer" target="_blank"><span>http</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> crate to your dependencies.</p>
    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">use aws_lambda_events::apigw::<span>{</span>ApiGatewayProxyRequest, ApiGatewayProxyResponse};
use http::HeaderMap;
use lambda_runtime::<span>{</span>service_fn, Error, LambdaEvent};

async fn handler(
    event: LambdaEvent&lt;ApiGatewayProxyRequest&gt;,
) -&gt; Result&lt;ApiGatewayProxyResponse, Error&gt; <span>{</span>
    let mut headers = HeaderMap::new();
    headers.insert("content-type", "text/html".parse().unwrap());
    let resp = ApiGatewayProxyResponse <span>{</span>
        status_code: 200,
        multi_value_headers: headers.clone(),
        is_base64_encoded: Some(false),
        body: Some("Hello AWS Lambda HTTP request".into()),
        headers,
    };
    Ok(resp)
}

#[tokio::main]
async fn main() -&gt; Result&lt;(), Error&gt; <span>{</span>
    lambda_runtime::run(service_fn(handler)).await
}</code></pre></div></div><p>The <a href="https://github.com/awslabs/aws-lambda-rust-runtime" rel="noopener noreferrer" target="_blank"><span>Rust runtime client for Lambda</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> also provides an abstraction over these event types that
    allows you to work with native HTTP types, regardless of which service sends the events. The
    following code is equivalent to the previous example, and it works out of the box with Lambda
    function URLs, Application Load Balancers, and API Gateway.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The <a href="https://crates.io/crates/lambda_http" rel="noopener noreferrer" target="_blank"><span>lambda_http</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> crate uses the <a href="https://crates.io/crates/lambda_runtime" rel="noopener noreferrer" target="_blank"><span>lambda_runtime</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> crate
      underneath. You don't have to import <code class="code">lambda_runtime</code> separately.</p></div></div><div class="example"><h6>Example â€” Handle HTTP requests</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">use lambda_http::<span>{</span>service_fn, Error, IntoResponse, Request, RequestExt, Response};

async fn handler(event: Request) -&gt; Result&lt;impl IntoResponse, Error&gt; <span>{</span>
    let resp = Response::builder()
        .status(200)
        .header("content-type", "text/html")
        .body("Hello AWS Lambda HTTP request")
        .map_err(Box::new)?;
    Ok(resp)
}

#[tokio::main]
async fn main() -&gt; Result&lt;(), Error&gt; <span>{</span>
    lambda_http::run(service_fn(handler)).await
}
</code></pre></div></div><p>For another example of how to use <code class="code">lambda_http</code>, see
    the <a href="https://github.com/awslabs/aws-lambda-rust-runtime/blob/main/examples/http-axum/src/main.rs" rel="noopener noreferrer" target="_blank"><span>http-axum code sample</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the AWS Labs GitHub repository.</p><div class="itemizedlist">
    <h6>Sample HTTP Lambda events for Rust</h6>
     
     
     
  <ul class="itemizedlist"><li class="listitem">
      <p><a href="https://github.com/awslabs/aws-lambda-rust-runtime/tree/main/examples/http-basic-lambda" rel="noopener noreferrer" target="_blank"><span>Lambda HTTP events</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>: A Rust function that handles HTTP
        events.</p>
    </li><li class="listitem">
      <p><a href="https://github.com/awslabs/aws-lambda-rust-runtime/blob/main/examples/http-cors" rel="noopener noreferrer" target="_blank"><span>Lambda
        HTTP events with CORS headers</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>: A Rust function that uses Tower to inject CORS
        headers.</p>
    </li><li class="listitem">
      <p><a href="https://github.com/awslabs/aws-lambda-rust-runtime/tree/main/examples/basic-shared-resource" rel="noopener noreferrer" target="_blank"><span>Lambda
        HTTP events with shared resources</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>: A Rust function that uses shared resources
        initialized before the function handler is created.</p>
    </li></ul></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./rust-context.html">Context</div><div id="next" class="next-link" accesskey="n" href="./rust-package.html">Deploy .zip file archives</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/rust-http-events.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/rust-http-events.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>