<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Activating and managing Lambda SnapStart - AWS Lambda</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="snapstart-activate" /><meta name="default_state" content="snapstart-activate" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/snapstart-activate.html" /><meta name="description" content="Use the Lambda console, the AWS CLI, or the Lambda API to activate SnapStart on a Lambda function." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Lambda" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/snapstart-activate.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/snapstart-activate.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/snapstart-activate.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/snapstart-activate.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/snapstart-activate.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/snapstart-activate.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/snapstart-activate.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/snapstart-activate.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/snapstart-activate.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/snapstart-activate.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/snapstart-activate.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/snapstart-activate.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/snapstart-activate.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/snapstart-activate.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/snapstart-activate.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/snapstart-activate.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/snapstart-activate.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/snapstart-activate.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/snapstart-activate.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/snapstart-activate.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/snapstart-activate.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/snapstart-activate.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS Lambda" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lambda'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Activating and managing Lambda SnapStart" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Activating and managing Lambda SnapStart - AWS Lambda</title><meta name="pdf" content="/pdfs/lambda/latest/dg/lambda-dg.pdf#snapstart-activate" /><meta name="rss" content="lambda-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/snapstart-activate.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/snapstart-activate.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/snapstart-activate.html" /><meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing,cold start,java initialization,Lambda function startup time,Lambda Java performance optimization,Lambda Java function cold start,activate SnapStart,enable Lambda SnapStart function,update function snapshot,SnapStart expire,Lambda SnapStart snapshot expiration" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Improving startup performance with Lambda SnapStart",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/snapstart.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Activating and managing Lambda SnapStart",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/snapstart.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lambda/latest/dg/lambda-dg.pdf#snapstart-activate" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div><div id="page-toc-src"><a href="#snapshot-console">Activating SnapStart (console)</a><a href="#snapshot-cli">Activating SnapStart (AWS CLI)</a><a href="#snapshot-api">Activating SnapStart (API)</a><a href="#snapstart-function-states">Function states</a><a href="#update-snapshot">Updating a snapshot</a><a href="#snapstart-credentials">Using SnapStart with the AWS SDK for Java</a><a href="#snapstart-cfn-sam">Using SnapStart with AWS CloudFormation, AWS SAM, and AWS CDK</a><a href="#snapshot-delete">Deleting snapshots</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="snapstart-activate">Activating and managing Lambda SnapStart</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>To use SnapStart, activate SnapStart on a new or existing Lambda function. Then, publish and invoke a function version.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#snapshot-console">Activating SnapStart (console)</a></li><li><a href="#snapshot-cli">Activating SnapStart (AWS CLI)</a></li><li><a href="#snapshot-api">Activating SnapStart (API)</a></li><li><a href="#snapstart-function-states">Lambda SnapStart and function states</a></li><li><a href="#update-snapshot">Updating a snapshot</a></li><li><a href="#snapstart-credentials">Using SnapStart with the AWS SDK for Java</a></li><li><a href="#snapstart-cfn-sam">Using SnapStart with AWS CloudFormation, AWS SAM, and AWS CDK</a></li><li><a href="#snapshot-delete">Deleting snapshots</a></li></ul></div>
    <h2 id="snapshot-console">Activating SnapStart (console)</h2>
    <div class="procedure"><h6>To activate SnapStart for a function</h6><ol><li><p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the Lambda console.</p></li><li>
        <p>Choose the name of a function.</p>
      </li><li>
        <p>Choose <b>Configuration</b>, and then choose <b>General
          configuration</b>.</p>
      </li><li>
        <p>On the <b>General configuration</b> pane, choose <b>Edit</b>.</p>
      </li><li>
        <p>On the <b>Edit basic settings</b> page, for <b>SnapStart</b>, choose
            <b>Published versions</b>.</p>
      </li><li>
        <p>Choose <b>Save</b>.</p>
      </li><li>
        <p><a href="./configuration-versions.html#configuration-versions-config">Publish a function version</a>. Lambda initializes your
          code, creates a snapshot of the initialized execution environment, and then caches the snapshot for
          low-latency access.</p>
      </li><li>
        <p><a href="./configuration-versions.html#versioning-versions-using">Invoke the function version</a>.</p>
      </li></ol></div>
 
  <h2 id="snapshot-cli">Activating SnapStart (AWS CLI)</h2>
  <div class="procedure"><h6>To activate SnapStart for an existing function</h6><ol><li>
        <p>Update the function configuration by running the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/lambda/update-function-configuration.html" rel="noopener noreferrer" target="_blank"><span>update-function-configuration</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> command with the <b>--snap-start</b> option.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda update-function-configuration \
  --function-name my-function \
  --snap-start ApplyOn=PublishedVersions</code></code></pre>
      </li><li>
    <p>Publish a function version with the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/lambda/publish-version.html" rel="noopener noreferrer" target="_blank"><span>publish-version</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> command.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda publish-version \
  --function-name my-function</code></code></pre>
  </li><li>
   <p>Confirm that SnapStart is activated for the function version by running the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/lambda/get-function-configuration.html" rel="noopener noreferrer" target="_blank"><span>get-function-configuration</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> command and specifying the version number. The following example
          specifies version 1.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda get-function-configuration \
  --function-name my-function:<code class="replaceable">1</code></code></code></pre>
   <p>If the response shows that <a href="./API_SnapStartResponse.html#SSS-Type-SnapStartResponse-OptimizationStatus">OptimizationStatus</a> is <code class="code">On</code> and <a href="./API_GetFunctionConfiguration.html#SSS-GetFunctionConfiguration-response-State">State</a> is <code class="code">Active</code>, then SnapStart is activated and a snapshot is available for the specified function version.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"SnapStart": <span>{</span> 
    "ApplyOn": "PublishedVersions",
    <code class="userinput">"OptimizationStatus": "On"</code>
 },
 <code class="userinput">"State": "Active"</code>,</code></pre>
</li><li>
  <p>Invoke the function version by running the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/lambda/invoke.html" rel="noopener noreferrer" target="_blank"><span>invoke</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
          command and specifying the version. The following example invokes version 1.</p>
  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda invoke \
  --cli-binary-format raw-in-base64-out \
  --function-name my-function:<code class="replaceable">1</code> \
  --payload '<span>{</span> "name": "Bob" }' \
  response.json</code></code></pre>
  <p>The <b>cli-binary-format</b> option is required if you're using AWS CLI version 2. To make this the default setting, run <code class="code">aws configure set cli-binary-format raw-in-base64-out</code>. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-options.html#cli-configure-options-list">AWS CLI supported global command line options</a>.</p>
</li></ol></div>
  <div class="procedure"><h6>To activate SnapStart when you create a new function</h6><ol><li>
  <p>Create a function by running the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/lambda/create-function.html" rel="noopener noreferrer" target="_blank"><span>create-function</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> command with the <b>--snap-start</b> option. For
            <b>--role</b>, specify the Amazon Resource Name (ARN) of your <a href="./lambda-intro-execution-role.html">execution role</a>.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda create-function \
  --function-name my-function \
  --runtime "java17" \
  --zip-file fileb://my-function.zip \
  --handler my-function.handler \
  --role <code class="replaceable">arn:aws:iam::111122223333:role/lambda-ex</code> \
  --snap-start ApplyOn=PublishedVersions</code></code></pre>  
  </li><li>
    <p>Create a version with the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/lambda/publish-version.html" rel="noopener noreferrer" target="_blank"><span>publish-version</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> command.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda publish-version \
  --function-name my-function</code></code></pre>
  </li><li>
    <p>Confirm that SnapStart is activated for the function version by running the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/lambda/get-function-configuration.html" rel="noopener noreferrer" target="_blank"><span>get-function-configuration</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> command and specifying the version number. The following example
          specifies version 1.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda get-function-configuration \
  --function-name my-function:<code class="replaceable">1</code></code></code></pre>
    <p>If the response shows that <a href="./API_SnapStartResponse.html#SSS-Type-SnapStartResponse-OptimizationStatus">OptimizationStatus</a> is <code class="code">On</code> and <a href="./API_GetFunctionConfiguration.html#SSS-GetFunctionConfiguration-response-State">State</a> is <code class="code">Active</code>, then SnapStart is activated and a snapshot is available for the specified function version.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"SnapStart": <span>{</span> 
     "ApplyOn": "PublishedVersions",
     <code class="userinput">"OptimizationStatus": "On"</code>
  },
  <code class="userinput">"State": "Active"</code>,</code></pre>
 </li><li>
    <p>Invoke the function version by running the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/lambda/invoke.html" rel="noopener noreferrer" target="_blank"><span>invoke</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
          command and specifying the version. The following example invokes version 1.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda invoke \
  --cli-binary-format raw-in-base64-out \
  --function-name my-function:<code class="replaceable">1</code> \
  --payload '<span>{</span> "name": "Bob" }' \
  response.json</code></code></pre>
  <p>The <b>cli-binary-format</b> option is required if you're using AWS CLI version 2. To make this the default setting, run <code class="code">aws configure set cli-binary-format raw-in-base64-out</code>. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-options.html#cli-configure-options-list">AWS CLI supported global command line options</a>.</p>
  </li></ol></div>
 
  <h2 id="snapshot-api">Activating SnapStart (API)</h2>
  <div class="procedure"><h6>To activate SnapStart</h6><ol><li>
        <p>Do one of the following:</p>
        <ul>
          <li>
            <p>Create a new function with SnapStart activated by using the <a href="./API_CreateFunction.html">CreateFunction</a> API action with the <a href="./API_SnapStart.html">SnapStart</a>
              parameter.</p>
          </li>
          <li>
            <p>Activate SnapStart for an existing function by using the <a href="./API_UpdateFunctionConfiguration.html">UpdateFunctionConfiguration</a> action with the <a href="./API_SnapStart.html">SnapStart</a> parameter.</p>
          </li>
        </ul>
      </li><li>
        <p>Publish a function version with the <a href="./API_PublishVersion.html">PublishVersion</a> action. Lambda
          initializes your code, creates a snapshot of the initialized execution environment, and then caches the
          snapshot for low-latency access.</p>
      </li><li>
        <p>Confirm that SnapStart is activated for the function version by using the <a href="./API_GetFunctionConfiguration.html">GetFunctionConfiguration</a> action. Specify a version number to
          confirm that SnapStart is activated for that version. If the response shows that <a href="./API_SnapStartResponse.html#SSS-Type-SnapStartResponse-OptimizationStatus">OptimizationStatus</a> is <code class="code">On</code> and <a href="./API_GetFunctionConfiguration.html#SSS-GetFunctionConfiguration-response-State">State</a> is <code class="code">Active</code>, then SnapStart is activated and a snapshot is available for the specified function version.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"SnapStart": <span>{</span> 
        "ApplyOn": "PublishedVersions",
        <code class="userinput">"OptimizationStatus": "On"</code>
     },
     <code class="userinput">"State": "Active"</code>,</code></pre>
      </li><li>
        <p>Invoke the function version with the <a href="./API_Invoke.html">Invoke</a> action.</p>
      </li></ol></div>
  
  <h2 id="snapstart-function-states">Lambda SnapStart and function states</h2>
   <p>The following function states can occur when you use SnapStart. They can also occur when Lambda periodically recycles the execution environment and re-runs the initialization code for a function that's configured with SnapStart.</p>
  <div class="itemizedlist">
     
     
     
     
  <ul class="itemizedlist"><li class="listitem">
      <p><code class="code">Pending</code> – Lambda is initializing your code and taking a snapshot of
          the initialized execution environment. Any invocations or other API actions that operate
          on the function version will fail.</p>
    </li><li class="listitem">
      <p><code class="code">Active</code> – Snapshot creation is complete and you can invoke the
          function. To use SnapStart, you must invoke the published function version, not the
          unpublished version ($LATEST).</p>
    </li><li class="listitem">
      <p><code class="code">Inactive</code> – The function version hasn't been invoked for 14 days. When the function
          version becomes
          <code class="code">Inactive</code>, Lambda deletes the snapshot. If you invoke the function version after 14 days, Lambda returns a
            <code class="code">SnapStartNotReadyException</code> response and begins initializing a new snapshot. Wait until the
          function version reaches the <code class="code">Active</code> state, and then invoke it again.</p>
    </li><li class="listitem">
      <p><code class="code">Failed</code> –  Lambda encountered an error when running the initialization code or creating the snapshot.</p>
    </li></ul></div>
 
    <h2 id="update-snapshot">Updating a snapshot</h2>
    <p>Lambda creates a snapshot for each published function version. To update a snapshot, publish a new function
      version. Lambda automatically updates your snapshots with the latest runtime and security patches.</p>
   
    <h2 id="snapstart-credentials">Using SnapStart with the AWS SDK for Java</h2>
    <p>To make AWS SDK calls from your function, Lambda generates an ephemeral set of credentials by assuming your
      function's execution role. These credentials are available as environment variables during your function's
      invocation. You don't need to provide credentials for the SDK directly in code. By default, the credential
      provider chain sequentially checks each place where you can set credentials and chooses the first
      available—usually the environment variables (<code class="code">AWS_ACCESS_KEY_ID</code>, <code class="code">AWS_SECRET_ACCESS_KEY</code>,
      and <code class="code">AWS_SESSION_TOKEN</code>).</p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>When SnapStart is activated, the Java runtime automatically uses the container credentials (<code class="code">AWS_CONTAINER_CREDENTIALS_FULL_URI</code> and <code class="code">AWS_CONTAINER_AUTHORIZATION_TOKEN</code>) instead of the access key environment variables. This prevents credentials from expiring before the function is restored.</p></div></div>
   
    <h2 id="snapstart-cfn-sam">Using SnapStart with AWS CloudFormation, AWS SAM, and AWS CDK</h2>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><b>AWS CloudFormation:</b> Declare the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-lambda-function-snapstart.html">SnapStart</a> entity in your template.</p>
      </li><li class="listitem">
        <p><b>AWS Serverless Application Model (AWS SAM):</b> Declare the <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-function.html#sam-function-snapstart">SnapStart</a> property in your template.</p>
      </li><li class="listitem">
        <p><b>AWS Cloud Development Kit (AWS CDK):</b> Use the <a href="https://docs.aws.amazon.com/cdk/api/v2/java/software/amazon/awscdk/services/lambda/CfnFunction.SnapStartProperty.html">SnapStartProperty</a> type.</p>
      </li></ul></div>
   
    <h2 id="snapshot-delete">Deleting snapshots</h2>
    <p>Lambda deletes snapshots when:</p>
    <div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>You delete the function or function version.</p>
      </li><li class="listitem">
        <p>You don't invoke the function version for 14 days. After 14 days without an invocation, the function
          version transitions to the <a href="#snapstart-function-states">Inactive</a> state. If you invoke the function version after 14 days, Lambda returns a
            <code class="code">SnapStartNotReadyException</code> response and begins initializing a new snapshot. Wait until the
          function version reaches the <a href="#snapstart-function-states">Active</a> state, and then invoke it again.</p>
      </li></ul></div>
    <p>Lambda removes all resources associated with deleted snapshots in compliance with the General Data Protection Regulation (GDPR).</p>
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./snapstart.html">Lambda SnapStart</div><div id="next" class="next-link" accesskey="n" href="./snapstart-uniqueness.html">Handling uniqueness</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/snapstart-activate.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/snapstart-activate.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>