<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Lambda function logging in C# - AWS Lambda</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="csharp-logging" /><meta name="default_state" content="csharp-logging" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-logging.html" /><meta name="description" content="Learn how to view Lambda function metrics for the C# runtime using CloudWatch." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Lambda" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-logging.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/csharp-logging.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/csharp-logging.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/csharp-logging.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/csharp-logging.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-logging.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-logging.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/csharp-logging.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/csharp-logging.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/csharp-logging.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/csharp-logging.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/csharp-logging.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/csharp-logging.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/csharp-logging.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/csharp-logging.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/csharp-logging.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/csharp-logging.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/csharp-logging.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/csharp-logging.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/csharp-logging.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/csharp-logging.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-logging.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS Lambda" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lambda'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Lambda function logging in C#" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Lambda function logging in C# - AWS Lambda</title><meta name="pdf" content="/pdfs/lambda/latest/dg/lambda-dg.pdf#csharp-logging" /><meta name="rss" content="lambda-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-logging.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-logging.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-logging.html" /><meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing,runtime,logs,metrics,C#,.NET" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Building Lambda functions with C#",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-csharp.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Lambda function logging in C#",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-csharp.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lambda/latest/dg/lambda-dg.pdf#csharp-logging" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div><div id="page-toc-src"><a href="#csharp-logging-output">Creating a function that returns logs</a><a href="#csharp-tools-libraries">Tools and libraries</a><a href="#dotnet-logging-sam">Using Powertools for AWS Lambda (.NET) and AWS SAM for structured logging</a><a href="#csharp-logging-console">Using the Lambda console</a><a href="#csharp-logging-cwconsole">Using the CloudWatch console</a><a href="#csharp-logging-cli">Using the AWS Command Line Interface (AWS CLI)</a><a href="#csharp-logging-delete">Deleting logs</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="csharp-logging">Lambda function logging in C#</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>AWS Lambda automatically monitors Lambda functions and sends log entries to Amazon CloudWatch. Your Lambda function 
    comes with a CloudWatch Logs log group and a log stream for each instance of your function. The Lambda runtime environment 
    sends details about each invocation and other output from your function's 
    code to the log stream. For more information about CloudWatch Logs, see <a href="./monitoring-cloudwatchlogs.html">Accessing Amazon CloudWatch logs for AWS Lambda</a>.</p><div class="highlights" id="inline-topiclist"><h6>Sections</h6><ul><li><a href="#csharp-logging-output">Creating a function that returns logs</a></li><li><a href="#csharp-tools-libraries">Tools and libraries</a></li><li><a href="#dotnet-logging-sam">Using Powertools for AWS Lambda (.NET) and AWS SAM for structured logging</a></li><li><a href="#csharp-logging-console">Using the Lambda console</a></li><li><a href="#csharp-logging-cwconsole">Using the CloudWatch console</a></li><li><a href="#csharp-logging-cli">Using the AWS Command Line Interface (AWS CLI)</a></li><li><a href="#csharp-logging-delete">Deleting logs</a></li></ul></div>
    <h2 id="csharp-logging-output">Creating a function that returns logs</h2>
    <p>To output logs from your function code, you can use methods on the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.console" rel="noopener noreferrer" target="_blank"><span>Console class</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, or any logging library
      that writes to <code class="code">stdout</code> or <code class="code">stderr</code>.</p>
    
    
    <p>The .NET runtime logs the <code class="code">START</code>, <code class="code">END</code>, and <code class="code">REPORT</code> lines for each
      invocation. The report line provides the following details.</p>
     <div class="itemizedlist">
    <h6>REPORT line data fields</h6>
     
     
     
     
     
     
     
     
     
  <ul class="itemizedlist"><li class="listitem">
      <p><b>RequestId</b> – The unique request ID for the invocation.</p>
    </li><li class="listitem">
      <p><b>Duration</b> – The amount of time that your function's handler method
        spent processing the event.</p>
    </li><li class="listitem">
      <p><b>Billed Duration</b> – The amount of time billed for the
        invocation.</p>
    </li><li class="listitem">
      <p><b>Memory Size</b> – The amount of memory allocated to the function.</p>
    </li><li class="listitem">
      <p><b>Max Memory Used</b> – The amount of memory used by the function.</p>
    </li><li class="listitem">
      <p><b>Init Duration</b> – For the first request served, the amount of time it
        took the runtime to load the function and run code outside of the handler method.</p>
    </li><li class="listitem">
      <p><b>XRAY TraceId</b> – For traced requests, the <a href="./services-xray.html">AWS X-Ray trace ID</a>.</p>
    </li><li class="listitem">
      <p><b>SegmentId</b> – For traced requests, the X-Ray segment ID.</p>
    </li><li class="listitem">
      <p><b>Sampled</b> – For traced requests, the sampling result.</p>
    </li></ul></div>
    
   
    <h2 id="csharp-tools-libraries">Tools and libraries</h2>
    
    <p><a href="https://docs.powertools.aws.dev/lambda/dotnet/" rel="noopener noreferrer" target="_blank"><span>Powertools for AWS Lambda (.NET)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> is a developer toolkit to implement Serverless best 
      practices and increase developer velocity. The <a href="https://docs.powertools.aws.dev/lambda/dotnet/core/logging/" rel="noopener noreferrer" target="_blank"><span>Logging utility</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 
      provides a Lambda optimized logger which includes additional information about function context across all your functions with output structured as JSON. Use this 
      utility to do the following:</p>
    <div class="itemizedlist">
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem"><p>Capture key fields from the Lambda context, cold start and structures logging output as JSON</p></li><li class="listitem"><p>Log Lambda invocation events when instructed (disabled by default)</p></li><li class="listitem"><p>Print all the logs only for a percentage of invocations via log sampling (disabled by default)</p></li><li class="listitem"><p>Append additional keys to structured log at any point in time</p></li><li class="listitem"><p>Use a custom log formatter (Bring Your Own Formatter) to output logs in a structure compatible with your organization’s Logging RFC</p></li></ul></div>
   
    <h2 id="dotnet-logging-sam">Using Powertools for AWS Lambda (.NET) and AWS SAM for structured logging</h2>
    <p>Follow the steps below to download, build, and deploy a sample Hello World C# application with integrated <a href="https://docs.powertools.aws.dev/lambda-dotnet" rel="noopener noreferrer" target="_blank"><span>Powertools for AWS Lambda (.NET)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> modules using the AWS SAM. This application implements a 
      basic API backend and uses Powertools for emitting logs, metrics, and traces. It consists of an Amazon API Gateway endpoint and a Lambda function. 
      When you send a GET request to the API Gateway endpoint, the Lambda function invokes, sends logs and metrics using Embedded Metric Format to CloudWatch, and 
      sends traces to AWS X-Ray. The function returns a <code class="code">hello world</code> message.</p>
    <div class="itemizedlist">
    <h6>Prerequisites</h6>
    <p>To complete the steps in this section, you must have the following:</p>
     
     
     
<ul class="itemizedlist"><li class="listitem">
      <p>.NET 6</p>
    </li><li class="listitem">
      <p><a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html">AWS CLI version 2</a></p>
    </li><li class="listitem">
      <p><a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html">AWS SAM CLI version 1.75 or later</a>. If you have an older version of the AWS SAM CLI, see <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/manage-sam-cli-versions.html#manage-sam-cli-versions-upgrade">Upgrading the AWS SAM CLI</a>.</p>
    </li></ul></div>
    <div class="procedure"><h6>Deploy a sample AWS SAM application</h6><ol><li>
        <p>Initialize the application using the Hello World TypeScript template.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">sam init --app-template hello-world-powertools-dotnet --name sam-app --package-type Zip --runtime dotnet6 --no-tracing</code></pre>
      </li><li>
        <p>Build the app.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">cd sam-app &amp;&amp; sam build</code></pre>
      </li><li>
        <p>Deploy the app.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">sam deploy --guided</code></pre>
      </li><li>
        <p>Follow the on-screen prompts. To accept the default options provided in the interactive experience, press <code class="code">Enter</code>.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For <b>HelloWorldFunction may not have authorization defined, Is this okay?</b>, make sure to enter <code class="code">y</code>.</p></div></div>
      </li><li>
        <p>Get the URL of the deployed application:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws cloudformation describe-stacks --stack-name sam-app --query 'Stacks[0].Outputs[?OutputKey==`HelloWorldApi`].OutputValue' --output text</code></pre>
      </li><li>
        <p>Invoke the API endpoint:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">curl -X GET <code class="replaceable">&lt;URL_FROM_PREVIOUS_STEP&gt;</code></code></pre>
        <p>If successful, you'll see this response:</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class=""><span>{</span>"message":"hello world"}</code></pre>
      </li><li>
        <p>To get the logs for the function, run <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-cli-command-reference-sam-logs.html">sam logs</a>. For more information, see <a href="https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-logging.html">Working with logs</a> in the <em>AWS Serverless Application Model Developer Guide</em>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">sam logs --stack-name sam-app</code></pre> 
        <p>The log output looks like this:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">2023/02/20/[$LATEST]4eaf8445ba7a4a93b999cb17fbfbecd8 2023-02-20T14:15:27.988000 INIT_START Runtime Version: dotnet:6.v13        Runtime Version ARN: arn:aws:lambda:ap-southeast-2::runtime:699f346a05dae24c58c45790bc4089f252bf17dae3997e79b17d939a288aa1ec
2023/02/20/[$LATEST]4eaf8445ba7a4a93b999cb17fbfbecd8 2023-02-20T14:15:28.229000 START RequestId: bed25b38-d012-42e7-ba28-f272535fb80e Version: $LATEST
2023/02/20/[$LATEST]4eaf8445ba7a4a93b999cb17fbfbecd8 2023-02-20T14:15:29.259000 2023-02-20T14:15:29.201Z        bed25b38-d012-42e7-ba28-f272535fb80e    info   <span>{</span>"_aws":<span>{</span>"Timestamp":1676902528962,"CloudWatchMetrics":[<span>{</span>"Namespace":"sam-app-logging","Metrics":[<span>{</span>"Name":"ColdStart","Unit":"Count"}],"Dimensions":[["FunctionName"],["Service"]]}]},"FunctionName":"sam-app-HelloWorldFunction-haKIoVeose2p","Service":"PowertoolsHelloWorld","ColdStart":1}
2023/02/20/[$LATEST]4eaf8445ba7a4a93b999cb17fbfbecd8 2023-02-20T14:15:30.479000 2023-02-20T14:15:30.479Z        bed25b38-d012-42e7-ba28-f272535fb80e    info   <span>{</span>"ColdStart":true,"XrayTraceId":"1-63f3807f-5dbcb9910c96f50742707542","CorrelationId":"d3d4de7f-4ccc-411a-a549-4d67b2fdc015","FunctionName":"sam-app-HelloWorldFunction-haKIoVeose2p","FunctionVersion":"$LATEST","FunctionMemorySize":256,"FunctionArn":"arn:aws:lambda:ap-southeast-2:123456789012:function:sam-app-HelloWorldFunction-haKIoVeose2p","FunctionRequestId":"bed25b38-d012-42e7-ba28-f272535fb80e","Timestamp":"2023-02-20T14:15:30.4602970Z","Level":"Information","Service":"PowertoolsHelloWorld","Name":"AWS.Lambda.Powertools.Logging.Logger","Message":"Hello world API - HTTP 200"}
2023/02/20/[$LATEST]4eaf8445ba7a4a93b999cb17fbfbecd8 2023-02-20T14:15:30.599000 2023-02-20T14:15:30.599Z        bed25b38-d012-42e7-ba28-f272535fb80e    info   <span>{</span>"_aws":<span>{</span>"Timestamp":1676902528922,"CloudWatchMetrics":[<span>{</span>"Namespace":"sam-app-logging","Metrics":[<span>{</span>"Name":"ApiRequestCount","Unit":"Count"}],"Dimensions":[["Service"]]}]},"Service":"PowertoolsHelloWorld","ApiRequestCount":1}
2023/02/20/[$LATEST]4eaf8445ba7a4a93b999cb17fbfbecd8 2023-02-20T14:15:30.680000 END RequestId: bed25b38-d012-42e7-ba28-f272535fb80e
2023/02/20/[$LATEST]4eaf8445ba7a4a93b999cb17fbfbecd8 2023-02-20T14:15:30.680000 REPORT RequestId: bed25b38-d012-42e7-ba28-f272535fb80e  Duration: 2450.99 ms   Billed Duration: 2451 ms Memory Size: 256 MB     Max Memory Used: 74 MB  Init Duration: 240.05 ms
XRAY TraceId: 1-63f3807f-5dbcb9910c96f50742707542       SegmentId: 16b362cd5f52cba0</code></pre>
      </li><li>
        <p>This is a public API endpoint that is accessible over the internet. We recommend that you delete the endpoint after testing.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">sam delete</code></pre> 
      </li></ol></div>
     
      <h3 id="csharp-log-retention">Managing log retention</h3>
      <p>Log groups aren't deleted automatically when you delete a function. To avoid storing logs indefinitely, delete
        the log group, or configure a retention period after which CloudWatch automatically deletes the logs. To set up log retention, add the following to your AWS SAM template:</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">Resources:
  HelloWorldFunction:
    Type: AWS::Serverless::Function
    Properties:
      # Omitting other properties

  LogGroup:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName: !Sub "/aws/lambda/$<span>{</span>HelloWorldFunction}"
      RetentionInDays: 7</code></pre>
     
   
    <h2 id="csharp-logging-console">Using the Lambda console</h2>
       
      
  <p>You can use the Lambda console to view log output after you invoke a Lambda function.</p>
  <p>If your code can be tested from the embedded <b>Code</b> editor, you will find logs in the <b>execution results</b>. When you use the console test feature to invoke a function, you'll find <b>Log output</b> in the <b>Details</b> section.</p>

   
    <h2 id="csharp-logging-cwconsole">Using the CloudWatch console</h2>
     
    
    <p>You can use the Amazon CloudWatch console to view logs for all Lambda function invocations.</p>
    <div class="procedure"><h6>To view logs on the CloudWatch console</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/cloudwatch/home?#logs:" rel="noopener noreferrer" target="_blank"><span>Log groups page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the CloudWatch console.</p>
      </li><li>
        <p>Choose the log group for your function (<b>/aws/lambda/<code class="replaceable">your-function-name</code></b>).</p>
      </li><li>
        <p>Choose a log stream.</p>
      </li></ol></div>
    <p>Each log stream corresponds to an <a href="./lambda-runtime-environment.html">instance of your function</a>. A log stream appears when you update your Lambda function, and when additional instances are created to handle multiple concurrent invocations. To find logs for a specific invocation, we recommend instrumenting your function with AWS X-Ray. X-Ray records details about the request and the log stream in the trace.</p>
    <p>To use a sample application that correlates logs and traces with X-Ray, see <a href="./samples-errorprocessor.html">Error processor sample application for AWS Lambda</a>.</p>

   
    <h2 id="csharp-logging-cli">Using the AWS Command Line Interface (AWS CLI)</h2>
       
      
    <p>The AWS CLI is an open-source tool that enables you to interact with AWS services using commands in your command line shell. To complete the steps in this section, you must have the following:</p>
    <div class="itemizedlist">
         
         
    <ul class="itemizedlist"><li class="listitem"><p><a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html">AWS Command Line Interface (AWS CLI) version 2</a></p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html">AWS CLI – Quick configuration with <code class="code">aws configure</code></a></p></li></ul></div>

       
      
    <p>You can use the <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html">AWS CLI</a> to retrieve logs for an invocation using the <code class="code">--log-type</code> command option. The response contains a <code class="code">LogResult</code> field that contains up to 4 KB of base64-encoded logs from the invocation.</p>
    <div class="example"><h6>Example retrieve a log ID</h6><div class="example-contents"><p>The following example shows how to retrieve a <em>log ID</em> from the <code class="code">LogResult</code> field for a function named <code class="code">my-function</code>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda invoke --function-name my-function out --log-type Tail</code></code></pre><p>You should see the following output:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "StatusCode": 200,
    "LogResult": "U1RBUlQgUmVxdWVzdElkOiA4N2QwNDRiOC1mMTU0LTExZTgtOGNkYS0yOTc0YzVlNGZiMjEgVmVyc2lvb...",
    "ExecutedVersion": "$LATEST"
}</code></pre></div></div>
<div class="example"><h6>Example decode the logs</h6><div class="example-contents"><p>In the same command prompt, use the <code class="code">base64</code> utility to decode the logs. The following example shows how to retrieve base64-encoded logs for <code class="code">my-function</code>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda invoke --function-name my-function out --log-type Tail \
--query 'LogResult' --output text --cli-binary-format raw-in-base64-out | base64 --decode</code></code></pre><p>The <b>cli-binary-format</b> option is required if you're using AWS CLI version 2. To make this the default setting, run <code class="code">aws configure set cli-binary-format raw-in-base64-out</code>. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-options.html#cli-configure-options-list">AWS CLI supported global command line options</a>.</p><p>You should see the following output:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">START RequestId: 57f231fb-1730-4395-85cb-4f71bd2b87b8 Version: $LATEST
"AWS_SESSION_TOKEN": "AgoJb3JpZ2luX2VjELj...", "_X_AMZN_TRACE_ID": "Root=1-5d02e5ca-f5792818b6fe8368e5b51d50;Parent=191db58857df8395;Sampled=0"",ask/lib:/opt/lib",
END RequestId: 57f231fb-1730-4395-85cb-4f71bd2b87b8
REPORT RequestId: 57f231fb-1730-4395-85cb-4f71bd2b87b8  Duration: 79.67 ms      Billed Duration: 80 ms         Memory Size: 128 MB     Max Memory Used: 73 MB</code></pre><p>The <code class="code">base64</code> utility is available on Linux, macOS, and <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener noreferrer" target="_blank"><span>Ubuntu on Windows</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. macOS users may need to use <code class="code">base64 -D</code>.</p></div></div>

       
      
    <div class="example"><h6>Example get-logs.sh script</h6><div class="example-contents"><p>In the same command prompt, use the following script to download the last five log events. The script uses <code class="code">sed</code> to remove quotes from the output file, and sleeps for 15 seconds to allow time for the logs to become available. The output includes the response from Lambda and the output from the <code class="code">get-log-events</code> command. </p><p>Copy the contents of the following code sample and save in your Lambda project directory as <code class="code">get-logs.sh</code>.</p><p>The <b>cli-binary-format</b> option is required if you're using AWS CLI version 2. To make this the default setting, run <code class="code">aws configure set cli-binary-format raw-in-base64-out</code>. For more information, see <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-options.html#cli-configure-options-list">AWS CLI supported global command line options</a>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">#!/bin/bash
aws lambda invoke --function-name my-function --cli-binary-format raw-in-base64-out --payload '<span>{</span>"key": "value"}' out
sed -i'' -e 's/"//g' out
sleep 15
aws logs get-log-events --log-group-name /aws/lambda/<code class="replaceable">my-function</code> --log-stream-name <code class="replaceable">stream1</code> --limit 5</code></pre></div></div>
        <div class="example"><h6>Example macOS and Linux (only)</h6><div class="example-contents"><p>In the same command prompt, macOS and Linux users may need to run the following command to ensure the script is executable.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">chmod -R 755 get-logs.sh</code></code></pre></div></div>
        <div class="example"><h6>Example retrieve the last five log events</h6><div class="example-contents"><p>In the same command prompt, run the following script to get the last five log events.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">./get-logs.sh</code></code></pre><p>You should see the following output:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "StatusCode": 200,
    "ExecutedVersion": "$LATEST"
}
<span>{</span>
    "events": [
        <span>{</span>
            "timestamp": 1559763003171,
            "message": "START RequestId: 4ce9340a-b765-490f-ad8a-02ab3415e2bf Version: $LATEST\n",
            "ingestionTime": 1559763003309
        },
        <span>{</span>
            "timestamp": 1559763003173,
            "message": "2019-06-05T19:30:03.173Z\t4ce9340a-b765-490f-ad8a-02ab3415e2bf\tINFO\tENVIRONMENT VARIABLES\r<span>{</span>\r  \"AWS_LAMBDA_FUNCTION_VERSION\": \"$LATEST\",\r ...",
            "ingestionTime": 1559763018353
        },
        <span>{</span>
            "timestamp": 1559763003173,
            "message": "2019-06-05T19:30:03.173Z\t4ce9340a-b765-490f-ad8a-02ab3415e2bf\tINFO\tEVENT\r<span>{</span>\r  \"key\": \"value\"\r}\n",
            "ingestionTime": 1559763018353
        },
        <span>{</span>
            "timestamp": 1559763003218,
            "message": "END RequestId: 4ce9340a-b765-490f-ad8a-02ab3415e2bf\n",
            "ingestionTime": 1559763018353
        },
        <span>{</span>
            "timestamp": 1559763003218,
            "message": "REPORT RequestId: 4ce9340a-b765-490f-ad8a-02ab3415e2bf\tDuration: 26.73 ms\tBilled Duration: 27 ms \tMemory Size: 128 MB\tMax Memory Used: 75 MB\t\n",
            "ingestionTime": 1559763018353
        }
    ],
    "nextForwardToken": "f/34783877304859518393868359594929986069206639495374241795",
    "nextBackwardToken": "b/34783877303811383369537420289090800615709599058929582080"
}</code></pre></div></div>

   
    <h2 id="csharp-logging-delete">Deleting logs</h2>
     <p>Log groups aren't deleted automatically when you delete a function. To avoid storing logs indefinitely, delete
    the log group, or <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/Working-with-log-groups-and-streams.html#SettingLogRetention">configure
      a retention period</a> after which logs are deleted automatically.</p>
    
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./csharp-context.html">Context</div><div id="next" class="next-link" accesskey="n" href="./csharp-exceptions.html">Errors</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-logging.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-logging.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>