<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tutorial: Using an Amazon S3 trigger to invoke a Lambda function - AWS Lambda</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="with-s3-example" /><meta name="default_state" content="with-s3-example" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html" /><meta name="description" content="In this tutorial, you use the console to create a Lambda function and configure a trigger for an Amazon Simple Storage Service (Amazon S3) bucket. Every time that you add an object to your Amazon S3 bucket, your function runs and outputs the object type to Amazon CloudWatch Logs." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Lambda" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/with-s3-example.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/with-s3-example.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/with-s3-example.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/with-s3-example.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/with-s3-example.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/with-s3-example.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/with-s3-example.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/with-s3-example.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/with-s3-example.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/with-s3-example.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/with-s3-example.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/with-s3-example.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/with-s3-example.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/with-s3-example.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/with-s3-example.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/with-s3-example.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/with-s3-example.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/with-s3-example.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS Lambda" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lambda'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Tutorial: Using an Amazon S3 trigger to invoke a Lambda function" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Tutorial: Using an Amazon S3 trigger to invoke a Lambda function - AWS Lambda</title><meta name="pdf" content="/pdfs/lambda/latest/dg/lambda-dg.pdf#with-s3-example" /><meta name="rss" content="lambda-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/with-s3-example.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/with-s3-example.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/with-s3-example.html" /><meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing,triggers,event,event object,other AWS service,using Lambda with DynamoDB database,using Lambda with SQS queue service,using Lambda with SNS notification service,lambda function s3 trigger,lambda s3 event" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Using AWS Lambda with other services",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-services.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Using AWS Lambda with Amazon S3",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/with-s3.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Tutorial: Using an Amazon S3 trigger to invoke a Lambda function",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/with-s3.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lambda/latest/dg/lambda-dg.pdf#with-s3-example" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div><div id="page-toc-src"><a href="#with-s3-example-prereqs">Prerequisites</a><a href="#with-s3-example-create-bucket">Create an Amazon S3 bucket</a><a href="#with-s3-example-upload-test-object">Upload a test object to your bucket</a><a href="#with-s3-example-create-policy">Create a permissions policy</a><a href="#with-s3-example-create-role">Create an execution role</a><a href="#with-s3-example-create-function">Create the Lambda function</a><a href="#with-s3-example-deploy-code">Deploy the function code</a><a href="#with-s3-example-create-trigger">Create the Amazon S3 trigger</a><a href="#with-s3-example-test-dummy-event">Test your Lambda function with a dummy event</a><a href="#cleanup">Clean up your resources</a><a href="#next-steps">Next steps</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="with-s3-example">Tutorial: Using an Amazon S3 trigger to invoke a Lambda function</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>In this tutorial, you use the console to create a Lambda function and configure a trigger for an Amazon Simple Storage Service (Amazon S3) bucket. Every time that you 
    add an object to your Amazon S3 bucket, your function runs and outputs the object type to Amazon CloudWatch Logs.</p><div class="mediaobject">
     
      <img src="/images/lambda/latest/dg/images/services-s3-example/s3_tut_config.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;      Diagram showing flow of data between an Amazon S3 bucket, a Lambda function and Amazon CloudWatch Logs&#xA;    " style="max-width:100%" /> 
     
     
  </div><p>You can use a Lambda function with an Amazon S3 trigger to perform many types of file processing tasks. For example, you can use a Lambda function 
    to create a thumbnail whenever an image file is uploaded to your Amazon S3 bucket, or to convert uploaded documents into different formats. After 
    you’ve completed this tutorial, you can try the <a href="https://docs.aws.amazon.com/lambda/latest/dg/with-s3-tutorial.html">Using an Amazon S3 trigger to create thumbnail images</a> 
    tutorial to perform an image processing task.</p><p>To complete this tutorial, you carry out the following steps:</p><div class="orderedlist">
     
     
     
     
  <ol><li>
      <p>Create an Amazon S3 bucket.</p>
    </li><li>
      <p>Create a Lambda function that returns the object type of objects in an Amazon S3 bucket.</p>
    </li><li>
      <p>Configure a Lambda trigger that invokes your function when objects are uploaded to your bucket.</p>
    </li><li>
      <p>Test your function, first with a dummy event, and then using the trigger.</p>
    </li></ol></div><p>By completing these steps, you’ll learn how to configure a Lambda function to run whenever objects are added to or deleted from an 
    Amazon S3 bucket. You can complete this tutorial using only the AWS Management Console.</p>
    <h2 id="with-s3-example-prereqs">Prerequisites</h2>
    
    <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="Sign up for an AWS account" id="sign-up-for-aws" expanded="false"><p>If you do not have an AWS account, complete the following steps to create one.</p><div class="procedure"><h6>To sign up for an AWS account</h6><ol><li><p>Open <a href="https://portal.aws.amazon.com/billing/signup" rel="noopener noreferrer" target="_blank"><span>https://portal.aws.amazon.com/billing/signup</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
  </li><li><p>Follow the online instructions.</p>
  <p>Part of the sign-up procedure involves receiving a phone call and entering 
  a verification code on the phone keypad.</p>
  <p>When you sign up for an AWS account, an <em>AWS account root user</em> is created. The root user has access to all AWS services
  and resources in the account. As a security best practice, <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/getting-started.html">assign administrative access to an administrative user</a>, and use only the root user to perform <a href="https://docs.aws.amazon.com/accounts/latest/reference/root-user-tasks.html">tasks that require root user access</a>.</p>
  </li></ol></div><p>AWS sends you a confirmation email after the sign-up process is
complete. At any time, you can view your current account activity and manage your account by
going to <a href="https://aws.amazon.com/" rel="noopener noreferrer" target="_blank"><span>https://aws.amazon.com/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and choosing <b>My
  Account</b>.</p></awsui-expandable-section><awsui-expandable-section variant="container" header="Create an administrative user" id="create-an-admin" expanded="false"><p>After you sign up for an AWS account, create an administrative user so that you 
don't use the root user for everyday tasks.</p><div class="procedure"><h6>Secure your AWS account root user</h6><ol><li>
 

<p> Sign in to the <a href="https://console.aws.amazon.com/" rel="noopener noreferrer" target="_blank"><span>AWS Management Console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> as the account owner by choosing <b>Root user</b> and entering your AWS account email address. On the next page, enter your password.</p>
 
 <p>For help signing in by using root user, see <a href="https://docs.aws.amazon.com/signin/latest/userguide/console-sign-in-tutorials.html#introduction-to-root-user-sign-in-tutorial">Signing in as the root user</a> in the <em>AWS Sign-In User Guide</em>.</p>
</li><li>
 <p>Turn on multi-factor authentication (MFA) for your root user.</p>
 <p>For instructions, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_enable_virtual.html#enable-virt-mfa-for-root">Enable a virtual MFA device for your AWS account root user (console)</a> in the <em>IAM User Guide</em>.</p> 
</li></ol></div><div class="procedure"><h6>Create an administrative user</h6><ul><li>
 <p>For your daily administrative tasks, grant administrative access to an administrative user in AWS IAM Identity Center.</p>
 <p>For instructions, see <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/getting-started.html">Getting started</a> in the <em>AWS IAM Identity Center User Guide</em>.</p>
</li></ul></div><div class="procedure"><h6>Sign in as the administrative user</h6><ul><li>

<p>To sign in with your IAM Identity Center user, use the sign-in URL that was sent to your email address when you created the IAM Identity Center user.</p>

<p>For help signing in using an IAM Identity Center user, see <a href="https://docs.aws.amazon.com/signin/latest/userguide/iam-id-center-sign-in-tutorial.html">Signing in to the AWS access portal</a> in the <em>AWS Sign-In User Guide</em>.</p>
</li></ul></div></awsui-expandable-section></div>
   
    <h2 id="with-s3-example-create-bucket">Create an Amazon S3 bucket</h2>
    <div class="mediaobject">
       
        <img src="/images/lambda/latest/dg/images/services-s3-example/s3trigger_tut_steps1.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Tutorial workflow diagram showing you are in the Amazon S3 bucket step creating the bucket&#xA;      " style="max-width:100%" />
       
       
    </div>
    <p>First create an Amazon S3 bucket using the AWS Management Console.</p>
    <div class="procedure"><h6>To create an Amazon S3 bucket</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/s3" rel="noopener noreferrer" target="_blank"><span>Amazon S3 console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and select the <b>Buckets</b> page.</p>
      </li><li>
        <p>Choose <b>Create bucket</b>.</p>
      </li><li>
        <p>Under <b>General configuration</b>, do the following:</p>
        <ol><li>
            <p>For <b>Bucket name</b>, enter a globally unique name that meets the Amazon S3 <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html">Bucket naming rules</a>. 
              Bucket names can contain only lower case letters, numbers, dots (.), and hyphens (-).</p>
          </li><li>
            <p>For <b>AWS Region</b>, choose a Region. Later in the tutorial, you must create your Lambda function in the same Region.</p>
          </li></ol>
      </li><li>
        <p>Leave all other options set to their default values and choose <b>Create bucket</b>.</p>
      </li></ol></div>
   
    <h2 id="with-s3-example-upload-test-object">Upload a test object to your bucket</h2>
    <div class="mediaobject">
       
        <img src="/images/lambda/latest/dg/images/services-s3-example/s3trigger_tut_steps2.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Tutorial workflow diagram showing you are in the Amazon S3 bucket step uploading a test object&#xA;      " style="max-width:100%" />
       
       
    </div>
    <p>Later in the tutorial, you’ll test your Lambda function in the Lambda console. To confirm that your function’s code is working correctly, 
      your Amazon S3 bucket needs to contain a test object. This object can be any file you choose (for example <code class="code">HappyFace.jpg</code>).</p>
    <div class="procedure"><h6>To upload a test object</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/s3/buckets" rel="noopener noreferrer" target="_blank"><span>Buckets</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> page of the Amazon S3 console and choose the bucket you created during the 
          previous step.</p>
      </li><li>
        <p>Choose <b>Upload</b>.</p>
      </li><li>
        <p>Choose <b>Add files</b> and use the file selector to choose the object you want to upload.</p>
      </li><li>
        <p>Choose <b>Open</b>, then choose <b>Upload</b>.</p>
      </li></ol></div>
    <p>When you test your function code later in the tutorial, you pass it data containing the file name of the object you uploaded, so make a 
    note of it now.</p>
   
    <h2 id="with-s3-example-create-policy">Create a permissions policy</h2>
    <div class="mediaobject">
       
        <img src="/images/lambda/latest/dg/images/services-s3-example/s3trigger_tut_steps3.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Tutorial workflow diagram showing you are in the Lambda function step creating the permissions policy&#xA;      " style="max-width:100%" />
       
       
    </div>
    <p>Before you can create an execution role for you Lambda function, you first create a permissions policy to give your function permission to 
      access the required AWS resources. For this tutorial, the policy allows Lambda to get objects from an Amazon S3 bucket and to write to Amazon CloudWatch Logs. </p> 
    <div class="procedure"><h6>To create the policy</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/iam/home#/policies" rel="noopener noreferrer" target="_blank"><span>Policies page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the IAM console.</p>
      </li><li>
        <p>Choose <b>Create Policy</b>.</p>
      </li><li>
        <p>Choose the <b>JSON</b> tab, and then paste the following custom policy into the JSON
          editor.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "logs:PutLogEvents",
                "logs:CreateLogGroup",
                "logs:CreateLogStream"
            ],
            "Resource": "arn:aws:logs:*:*:*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": "arn:aws:s3:::*/*"
        }
    ]
}</code></pre>
      </li><li>
        <p>Choose <b>Next: Tags</b>.</p>
      </li><li>
        <p>Choose <b>Next: Review</b>.</p>
      </li><li>
        <p>Under <b>Review policy</b>, for the policy <b>Name</b>, enter
          <code class="userinput">s3-trigger-tutorial</code>.</p>
      </li><li>
        <p>Choose <b>Create policy</b>.</p>
      </li></ol></div>
   
    <h2 id="with-s3-example-create-role">Create an execution role</h2>
    <div class="mediaobject">
       
        <img src="/images/lambda/latest/dg/images/services-s3-example/s3trigger_tut_steps4.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Tutorial workflow diagram showing you are in the Lambda function step creating the execution role&#xA;      " style="max-width:100%" />
       
       
    </div>
    <p>An <a href="./lambda-intro-execution-role.html">execution role</a> is an AWS Identity and Access Management (IAM) role that grants a Lambda function permission to access AWS services and resources. To enable 
      your function to get objects from an Amazon S3 bucket, you attach the permissions policy you created in the previous step.</p>
    <div class="procedure"><h6>To create an execution role and attach your custom permissions policy</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/iam/home#/roles" rel="noopener noreferrer" target="_blank"><span>Roles page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the IAM console.</p>
      </li><li>
        <p>Choose <b>Create role</b>.</p>
      </li><li>
        <p>For the type of trusted entity, choose <b>AWS service</b>, then for the use case, choose <b>Lambda</b>.</p>
      </li><li>
        <p>Choose <b>Next</b>.</p>
      </li><li>
        <p>In the policy search box, enter <code class="userinput">s3-trigger-tutorial</code>.</p>
      </li><li>
        <p>In the search results, select the policy that you created (<code class="code">s3-trigger-tutorial</code>), and
          then choose <b>Next</b>.</p>
      </li><li>
        <p>Under <b>Role details</b>, for the <b>Role name</b>, enter
          <code class="userinput">lambda-s3-trigger-role</code>, then choose <b>Create role</b>.</p>
      </li></ol></div>
   
    <h2 id="with-s3-example-create-function">Create the Lambda function</h2>
    <div class="mediaobject">
       
        <img src="/images/lambda/latest/dg/images/services-s3-example/s3trigger_tut_steps5.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Tutorial workflow diagram showing you are in the Lambda function step creating the function&#xA;      " style="max-width:100%" />
       
       
    </div>
    <p>In this example, you create a Lambda function in the console using the Node.js 16.x runtime. The function you create in the console contains 
      some basic ‘Hello World’ code. In the next step, you’ll replace this with the function code to get an object from your Amazon S3 bucket.</p>
    <div class="procedure"><h6>To create the Lambda function</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> page of the Lambda console.</p>
      </li><li>
        <p>Make sure you're working in the same AWS Region you created your Amazon S3 bucket in. You can change your Region using the drop-down list 
        at the top of the screen.</p>
        <div class="mediaobject">
           
            <img src="/images/lambda/latest/dg/images/console_region_select.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;            Image showing drop down region menu in Lambda console&#xA;          " style="max-width:100%" />
           
           
        </div>
      </li><li>
        <p>Choose <b>Create function</b>.</p>
      </li><li>
        <p>Choose <b>Author from scratch</b></p>
      </li><li>
        <p>Under <b>Basic information</b>, do the following:</p>
        <ol><li>
            <p>For <b>Function name</b>, enter <code class="code">s3-trigger-tutorial</code></p>
          </li><li>
            <p>For <b>Runtime</b>, choose <b>Node.js 16.x</b>.</p>
          </li><li>
            <p>For <b>Architecture</b>, choose <b>x86_64</b>.</p>
          </li></ol>
      </li><li>
        <p>In the <b>Change default execution role</b> tab, do the following:</p>
        <ol><li>
            <p>Expand the tab, then choose <b>Use an existing role</b>.</p>
          </li><li>
            <p>Select the <code class="code">lambda-s3-trigger-role</code> you created earlier.</p>
          </li></ol>
      </li><li>
        <p>Choose <b>Create function</b>.</p>
      </li></ol></div>
   
    <h2 id="with-s3-example-deploy-code">Deploy the function code</h2>
    <div class="mediaobject">
       
        <img src="/images/lambda/latest/dg/images/services-s3-example/s3trigger_tut_steps6.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Tutorial workflow diagram showing you are in the Lambda function step deploying the code&#xA;      " style="max-width:100%" />
       
       
    </div>
    <p>Your Lambda function will retrieve the key name of the uploaded object and the name of the bucket from the <code class="code">event</code> parameter it receives 
      from Amazon S3. The function then uses the <code class="code">HeadObject</code> API call in the AWS SDK for JavaScript to get the object type for the uploaded object.</p>
    <p>This tutorial uses the Node.js 16.x runtime, but we’ve also provided example code files for other runtimes. You can select the 
      tab in the following box to see the code for the runtime you’re interested in. The JavaScript code you’ll deploy is the first example shown in the
      tab labeled <b>JavaScript</b>.</p>
    <awsdocs-tabs><dl style="display: none">
    <dt>.NET</dt><dd tab-id=".net">
            <div class="variablelist">
     
<dl>
        <dt><b><span class="term">AWS SDK for .NET</span></b></dt>
        <dd>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
                    There's more on GitHub. Find the complete example and learn how to set up and run in the
                    <a href="https://github.com/aws-samples/serverless-snippets/tree/main/integration-s3-to-lambda#code-examples" rel="noopener noreferrer" target="_blank"><span>Serverless examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository.
                </p></div></div>
             
                <p>Consuming an S3 event with Lambda using .NET.</p>
                
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="csharp ">using System.Threading.Tasks;
using Amazon.Lambda.Core;
using Amazon.S3;
using System;
using Amazon.Lambda.S3Events;
using System.Web;

// Assembly attribute to enable the Lambda function's JSON input to be converted into a .NET class.
[assembly: LambdaSerializer(typeof(Amazon.Lambda.Serialization.SystemTextJson.DefaultLambdaJsonSerializer))]

namespace S3Integration
<span>{</span>
    public class Function
    <span>{</span>
        private static AmazonS3Client _s3Client;
        public Function() : this(null)
        <span>{</span>
        }

        internal Function(AmazonS3Client s3Client)
        <span>{</span>
            _s3Client = s3Client ?? new AmazonS3Client();
        }

        public async Task&lt;string&gt; Handler(S3Event evt, ILambdaContext context)
        <span>{</span>
            try
            <span>{</span>
                if (evt.Records.Count &lt;= 0)
                <span>{</span>
                    context.Logger.LogLine("Empty S3 Event received");
                    return string.Empty;
                }

                var bucket = evt.Records[0].S3.Bucket.Name;
                var key = HttpUtility.UrlDecode(evt.Records[0].S3.Object.Key);

                context.Logger.LogLine($"Request is for <span>{</span>bucket} and <span>{</span>key}");

                var objectResult = await _s3Client.GetObjectAsync(bucket, key);

                context.Logger.LogLine($"Returning <span>{</span>objectResult.Key}");

                return objectResult.Key;
            }
            catch (Exception e)
            <span>{</span>
                context.Logger.LogLine($"Error processing request - <span>{</span>e.Message}");

                return string.Empty;
            }
        }
    }
}
</code></pre>
             
        </dd>
    </dl></div>
        </dd>
    <dt>Go</dt><dd tab-id="go">
            <div class="variablelist">
     
<dl>
        <dt><b><span class="term">SDK for Go V2</span></b></dt>
        <dd>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
                    There's more on GitHub. Find the complete example and learn how to set up and run in the
                    <a href="https://github.com/aws-samples/serverless-snippets/tree/main/integration-s3-to-lambda#code-examples" rel="noopener noreferrer" target="_blank"><span>Serverless examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository.
                </p></div></div>
             
                <p>Consuming an S3 event with Lambda using Go.</p>
                
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="go ">package main

import (
	"context"
	"log"

	"github.com/aws/aws-lambda-go/events"
	"github.com/aws/aws-lambda-go/lambda"
	"github.com/aws/aws-sdk-go-v2/config"
	"github.com/aws/aws-sdk-go-v2/service/s3"
)

func handler(ctx context.Context, s3Event events.S3Event) error <span>{</span>
	sdkConfig, err := config.LoadDefaultConfig(ctx)
	if err != nil <span>{</span>
		log.Printf("failed to load default config: %s", err)
		return err
	}
	s3Client := s3.NewFromConfig(sdkConfig)

	for _, record := range s3Event.Records <span>{</span>
		bucket := record.S3.Bucket.Name
		key := record.S3.Object.URLDecodedKey
		headOutput, err := s3Client.HeadObject(ctx, &amp;s3.HeadObjectInput<span>{</span>
			Bucket: &amp;bucket,
			Key:    &amp;key,
		})
		if err != nil <span>{</span>
			log.Printf("error getting head of object %s/%s: %s", bucket, key, err)
			return err
		}
		log.Printf("successfully retrieved %s/%s of type %s", bucket, key, *headOutput.ContentType)
	}

	return nil
}

func main() <span>{</span>
	lambda.Start(handler)
}

</code></pre>
             
        </dd>
    </dl></div>
        </dd>
    <dt>Java</dt><dd tab-id="java">
            <div class="variablelist">
     
<dl>
        <dt><b><span class="term">SDK for Java 2.x</span></b></dt>
        <dd>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
                    There's more on GitHub. Find the complete example and learn how to set up and run in the
                    <a href="https://github.com/aws-samples/serverless-snippets/tree/main/integration-s3-to-lambda#readme" rel="noopener noreferrer" target="_blank"><span>Serverless examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository.
                </p></div></div>
             
                <p>Consuming an S3 event with Lambda using Java.</p>
                
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">package example;

import software.amazon.awssdk.services.s3.model.HeadObjectRequest;
import software.amazon.awssdk.services.s3.model.HeadObjectResponse;
import software.amazon.awssdk.services.s3.S3Client;

import com.amazonaws.services.lambda.runtime.Context;
import com.amazonaws.services.lambda.runtime.RequestHandler;
import com.amazonaws.services.lambda.runtime.events.S3Event;
import com.amazonaws.services.lambda.runtime.events.models.s3.S3EventNotification.S3EventNotificationRecord;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class Handler implements RequestHandler&lt;S3Event, String&gt; <span>{</span>
    private static final Logger logger = LoggerFactory.getLogger(Handler.class);
    @Override
    public String handleRequest(S3Event s3event, Context context) <span>{</span>
        try <span>{</span>
          S3EventNotificationRecord record = s3event.getRecords().get(0);
          String srcBucket = record.getS3().getBucket().getName();
          String srcKey = record.getS3().getObject().getUrlDecodedKey();

          S3Client s3Client = S3Client.builder().build();
          HeadObjectResponse headObject = getHeadObject(s3Client, srcBucket, srcKey);

          logger.info("Successfully retrieved " + srcBucket + "/" + srcKey + " of type " + headObject.contentType());

          return "Ok";
        } catch (Exception e) <span>{</span>
          throw new RuntimeException(e);
        }
    }

    private HeadObjectResponse getHeadObject(S3Client s3Client, String bucket, String key) <span>{</span>
        HeadObjectRequest headObjectRequest = HeadObjectRequest.builder()
                .bucket(bucket)
                .key(key)
                .build();
        return s3Client.headObject(headObjectRequest);
    }
}
</code></pre>
             
        </dd>
    </dl></div>
        </dd>
    <dt>JavaScript</dt><dd tab-id="javascript">
            <div class="variablelist">
     
<dl>
        <dt><b><span class="term">SDK for JavaScript (v2)</span></b></dt>
        <dd>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
                    There's more on GitHub. Find the complete example and learn how to set up and run in the
                    <a href="https://github.com/aws-samples/serverless-snippets/tree/main/integration-s3-to-lambda#code-examples" rel="noopener noreferrer" target="_blank"><span>Serverless examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository.
                </p></div></div>
             
                <p>Consuming an S3 event with Lambda using JavaScript.</p>
                
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="javascript ">const aws = require('aws-sdk');

const s3 = new aws.S3(<span>{</span> apiVersion: '2006-03-01' });

exports.handler = async (event, context) =&gt; <span>{</span>
    // Get the object from the event and show its content type
    const bucket = event.Records[0].s3.bucket.name;
    const key = decodeURIComponent(event.Records[0].s3.object.key.replace(/\+/g, ' '));
    const params = <span>{</span>
        Bucket: bucket,
        Key: key,
    }; 
    try <span>{</span>
        const <span>{</span> ContentType } = await s3.headObject(params).promise();
        console.log('CONTENT TYPE:', ContentType);
        return ContentType;
    } catch (err) <span>{</span>
        console.log(err);
        const message = `Error getting object $<span>{</span>key} from bucket $<span>{</span>bucket}. Make sure they exist and your bucket is in the same region as this function.`;
        console.log(message);
        throw new Error(message);
    }
};

</code></pre>
             
             
                <p>Consuming an S3 event with Lambda using TypeScript.</p>
                
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="javascript ">import <span>{</span> S3Event } from 'aws-lambda';
import <span>{</span> S3Client, HeadObjectCommand } from '@aws-sdk/client-s3';

const s3 = new S3Client(<span>{</span> region: process.env.AWS_REGION });

export const handler = async (event: S3Event): Promise&lt;string | undefined&gt; =&gt; <span>{</span>
  // Get the object from the event and show its content type
  const bucket = event.Records[0].s3.bucket.name;
  const key = decodeURIComponent(event.Records[0].s3.object.key.replace(/\+/g, ' '));
  const params = <span>{</span>
    Bucket: bucket,
    Key: key,
  };
  try <span>{</span>
    const <span>{</span> ContentType } = await s3.send(new HeadObjectCommand(params));
    console.log('CONTENT TYPE:', ContentType);
    return ContentType;
  } catch (err) <span>{</span>
    console.log(err);
    const message = `Error getting object $<span>{</span>key} from bucket $<span>{</span>bucket}. Make sure they exist and your bucket is in the same region as this function.`;
    console.log(message);
    throw new Error(message);
  }
};
</code></pre>
             
        </dd>
    </dl></div>
        </dd>
    <dt>Python</dt><dd tab-id="python">
            <div class="variablelist">
     
<dl>
        <dt><b><span class="term">SDK for Python (Boto3)</span></b></dt>
        <dd>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
                    There's more on GitHub. Find the complete example and learn how to set up and run in the
                    <a href="https://github.com/aws-samples/serverless-snippets/tree/main/integration-s3-to-lambda#code-examples" rel="noopener noreferrer" target="_blank"><span>Serverless examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository.
                </p></div></div>
             
                <p>Consuming an S3 event with Lambda using Python.</p>
                
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import json
import urllib.parse
import boto3

print('Loading function')

s3 = boto3.client('s3')


def lambda_handler(event, context):
    #print("Received event: " + json.dumps(event, indent=2))

    # Get the object from the event and show its content type
    bucket = event['Records'][0]['s3']['bucket']['name']
    key = urllib.parse.unquote_plus(event['Records'][0]['s3']['object']['key'], encoding='utf-8')
    try:
        response = s3.get_object(Bucket=bucket, Key=key)
        print("CONTENT TYPE: " + response['ContentType'])
        return response['ContentType']
    except Exception as e:
        print(e)
        print('Error getting object <span>{</span>} from bucket <span>{</span>}. Make sure they exist and your bucket is in the same region as this function.'.format(key, bucket))
        raise e
              
</code></pre>
             
        </dd>
    </dl></div>
        </dd>
    <dt>Rust</dt><dd tab-id="rust">
            <div class="variablelist">
     
<dl>
        <dt><b><span class="term">SDK for Rust</span></b></dt>
        <dd>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This documentation is for an SDK in preview release. The SDK is subject to change and should not be used in production.</p></div></div>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
                    There's more on GitHub. Find the complete example and learn how to set up and run in the
                    <a href="https://github.com/aws-samples/serverless-snippets/tree/main/integration-s3-to-lambda#code-examples" rel="noopener noreferrer" target="_blank"><span>Serverless examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository.
                </p></div></div>
             
                <p>Consuming an S3 event with Lambda using Rust.</p>
                
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="rust ">use aws_lambda_events::event::s3::S3Event;
use aws_sdk_s3::<span>{</span>Client};
use lambda_runtime::<span>{</span>run, service_fn, Error, LambdaEvent};


/// Main function
#[tokio::main]
async fn main() -&gt; Result&lt;(), Error&gt; <span>{</span>
    tracing_subscriber::fmt()
        .with_max_level(tracing::Level::INFO)
        .with_target(false)
        .without_time()
        .init();

    // Initialize the AWS SDK for Rust
    let config = aws_config::load_from_env().await;
    let s3_client = Client::new(&amp;config);

    let res = run(service_fn(|request: LambdaEvent&lt;S3Event&gt;| <span>{</span>
        function_handler(&amp;s3_client, request)
    })).await;

    res
}

async fn function_handler(
    s3_client: &amp;Client,
    evt: LambdaEvent&lt;S3Event&gt;
) -&gt; Result&lt;(), Error&gt; <span>{</span>
    tracing::info!(records = ?evt.payload.records.len(), "Received request from SQS");

    if evt.payload.records.len() == 0 <span>{</span>
        tracing::info!("Empty S3 event received");
    }

    let bucket = evt.payload.records[0].s3.bucket.name.as_ref().expect("Bucket name to exist");
    let key = evt.payload.records[0].s3.object.key.as_ref().expect("Object key to exist");

    tracing::info!("Request is for <span>{</span>} and object <span>{</span>}", bucket, key);

    let s3_get_object_result = s3_client
        .get_object()
        .bucket(bucket)
        .key(key)
        .send()
        .await;

    match s3_get_object_result <span>{</span>
        Ok(_) =&gt; tracing::info!("S3 Get Object success, the s3GetObjectResult contains a 'body' property of type ByteStream"),
        Err(_) =&gt; tracing::info!("Failure with S3 Get Object request")
    }

    Ok(())
}
</code></pre>
             
        </dd>
    </dl></div>
        </dd>
</dl></awsdocs-tabs>
    <div class="procedure"><h6>To deploy the function code</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> page of the Lambda console.</p>
      </li><li>
       <p>Choose the function you created in the previous step (<code class="code">s3-trigger-tutorial</code>).</p>
      </li><li>
        <p>Choose the <b>Code</b> tab.</p>
      </li><li>
        <p>Copy and paste the provided JavaScript code into the <b>index.js</b> tab in the <b>Code source</b> pane.</p>
      </li><li>
        <p>Choose <b>Deploy</b>.</p>
      </li></ol></div>
   
    <h2 id="with-s3-example-create-trigger">Create the Amazon S3 trigger</h2>
    <div class="mediaobject">
       
        <img src="/images/lambda/latest/dg/images/services-s3-example/s3trigger_tut_steps7.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Tutorial workflow diagram showing you are in the S3 trigger step creating the trigger&#xA;      " style="max-width:100%" />
       
       
    </div>
    <p>Now you’ve deployed your function code, you create the Amazon S3 trigger that will invoke your function.</p>
    <div class="procedure"><h6>To create the Amazon S3 trigger</h6><ol><li>
        <p>In the <b>Function overview</b> pane of your function’s console page, choose <b>Add trigger</b>.</p>
      </li><li>
        <p>Select <b>S3</b>.</p>
      </li><li>
        <p>Under <b>Bucket</b>, select the bucket you created earlier in the tutorial.</p>
      </li><li>
        <p>Under <b>Event types</b>, select <b>All object create events</b>. You can also configure a trigger to 
          invoke Lambda when an object is deleted, but we won’t be using that option in this tutorial.</p>
      </li><li>
        <p>Under <b>Recursive invocation</b>, select the check box to acknowledge that using the same Amazon S3 bucket for input and 
          output is not recommended. You can learn more about recursive invocation patterns in Lambda by reading
          <a href="https://serverlessland.com/content/service/lambda/guides/aws-lambda-operator-guide/recursive-runaway" rel="noopener noreferrer" target="_blank"><span>Recursive patterns that cause run-away Lambda functions</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
          in Serverless Land.</p>
      </li><li>
        <p>Choose <b>Add</b>.</p>
      </li></ol></div>
   
    <h2 id="with-s3-example-test-dummy-event">Test your Lambda function with a dummy event</h2>
    <div class="mediaobject">
       
        <img src="/images/lambda/latest/dg/images/services-s3-example/s3trigger_tut_steps8.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Tutorial workflow diagram showing you are in the testing step testing with a dummy event&#xA;      " style="max-width:100%" />
       
       
    </div>
    <p>Now that you’ve created and configured your Lambda function, you’re ready to test it. You first test your function by sending it a dummy 
     Amazon S3 event to confirm it’s working correctly.</p>
    <div class="procedure"><h6>To test the Lambda function with a dummy event</h6><ol><li>
        <p>In the Lambda console page for your function, choose the <b>Code</b> tab.</p>
      </li><li>
        <p>In the <b>Code source</b> pane, choose <b>Test</b>.</p>
      </li><li>
        <p>In the <b>Configure test event</b> box, do the following:</p>
        <ol><li>
            <p>For <b>Event name</b>, enter <code class="code">MyTestEvent</code>.</p>
          </li><li>
            <p>For <b>Template</b>, choose <b>S3 Put</b>.</p>
          </li><li>
            <p>In the Event JSON, replace the following values:</p>
            <div class="itemizedlist">
               
               
               
            <ul class="itemizedlist"><li class="listitem">
                <p>Replace <code class="code">us-east-1</code> with the region you created your Amazon S3 bucket in.</p>
              </li><li class="listitem">
                <p>Replace both instances of <code class="code">example-bucket</code> with the name of your own Amazon S3 bucket.</p>
              </li><li class="listitem">
                <p>Replace <code class="code">test%2FKey</code> with the name of the test object you uploaded to your bucket earlier (for example, 
                  <code class="code">HappyFace.jpg</code>).</p>
              </li></ul></div>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Records": [
    <span>{</span>
      "eventVersion": "2.0",
      "eventSource": "aws:s3",
      "awsRegion": "<code class="replaceable">us-east-1</code>",
      "eventTime": "1970-01-01T00:00:00.000Z",
      "eventName": "ObjectCreated:Put",
      "userIdentity": <span>{</span>
        "principalId": "EXAMPLE"
      },
      "requestParameters": <span>{</span>
        "sourceIPAddress": "127.0.0.1"
      },
      "responseElements": <span>{</span>
        "x-amz-request-id": "EXAMPLE123456789",
        "x-amz-id-2": "EXAMPLE123/5678abcdefghijklambdaisawesome/mnopqrstuvwxyzABCDEFGH"
      },
      "s3": <span>{</span>
        "s3SchemaVersion": "1.0",
        "configurationId": "testConfigRule",
        "bucket": <span>{</span>
          "name": "<code class="replaceable">example-bucket</code>",
          "ownerIdentity": <span>{</span>
            "principalId": "EXAMPLE"
          },
          "arn": "arn:aws:s3:::<code class="replaceable">example-bucket</code>"
        },
        "object": <span>{</span>
          "key": "<code class="replaceable">test%2Fkey</code>",
          "size": 1024,
          "eTag": "0123456789abcdef0123456789abcdef",
          "sequencer": "0A1B2C3D4E5F678901"
        }
      }
    }
  ]
}</code></pre>
          </li><li>
            <p>Choose <b>Save</b>.</p>
          </li></ol>
      </li><li>
        <p>In the <b>Code source</b> pane, choose <b>Test</b>.</p>
      </li><li>
        <p>If your function runs successfully, you’ll see output similar to the following in the <b>Execution results</b> tab.</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">Response
"image/jpeg"

Function Logs
START RequestId: 12b3cae7-5f4e-415e-93e6-416b8f8b66e6 Version: $LATEST
2021-02-18T21:40:59.280Z    12b3cae7-5f4e-415e-93e6-416b8f8b66e6    INFO    INPUT BUCKET AND KEY:  <span>{</span> Bucket: 'my-s3-bucket', Key: 'HappyFace.jpg' }
2021-02-18T21:41:00.215Z    12b3cae7-5f4e-415e-93e6-416b8f8b66e6    INFO    CONTENT TYPE: image/jpeg
END RequestId: 12b3cae7-5f4e-415e-93e6-416b8f8b66e6
REPORT RequestId: 12b3cae7-5f4e-415e-93e6-416b8f8b66e6    Duration: 976.25 ms    Billed Duration: 977 ms    Memory Size: 128 MB    Max Memory Used: 90 MB    Init Duration: 430.47 ms        

Request ID
12b3cae7-5f4e-415e-93e6-416b8f8b66e6</code></pre>
      </li></ol></div>
     
      <h3 id="with-s3-example-test-s3-trigger">Test the Lambda function with the Amazon S3 trigger</h3>
      <div class="mediaobject">
         
          <img src="/images/lambda/latest/dg/images/services-s3-example/s3trigger_tut_steps9.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;          Tutorial workflow diagram showing you are in the testing step testing using the S3 trigger&#xA;        " style="max-width:100%" />
         
         
      </div>
      <p>To test your function with the configured trigger, you upload an object to your Amazon S3 bucket using the console. To verify that your Lambda 
        function has been invoked correctly, you then use CloudWatch Logs to view your function’s output.</p>
      <div class="procedure"><h6>To upload an object to your Amazon S3 bucket</h6><ol><li>
          <p>Open the <a href="https://console.aws.amazon.com/s3/buckets" rel="noopener noreferrer" target="_blank"><span>Buckets</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> page of the Amazon S3 console and choose the bucket you created earlier.</p>
        </li><li>
          <p>Choose <b>Upload</b>.</p>
        </li><li>
          <p>Choose <b>Add files</b> and use the file selector to choose an object you want to upload. This object can be any file 
            you choose.</p>
        </li><li>
          <p>Choose <b>Open</b>, then choose <b>Upload</b>.</p>
        </li></ol></div>
      <div class="procedure"><h6>To verify correct operation using CloudWatch Logs</h6><ol><li>
          <p>Open the <a href="https://console.aws.amazon.com/cloudwatch/home" rel="noopener noreferrer" target="_blank"><span>CloudWatch</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> console.</p>
        </li><li>
          <p>Make sure you're working in the same AWS Region you created your Lambda function in. You can change your Region using the drop-down 
            list at the top of the screen.</p>
          <div class="mediaobject">
             
              <img src="/images/lambda/latest/dg/images/console_region_select.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;              Image showing drop down region menu in Lambda console&#xA;            " style="max-width:100%" />
             
             
          </div>
        </li><li>
          <p>Choose <b>Logs</b>, then choose <b>Log groups</b>.</p>
        </li><li>
          <p>Choose the log group for your function (<code class="code">/aws/lambda/s3-trigger-tutorial</code>).</p>
        </li><li>
          <p>Under <b>Log streams</b>, choose the most recent log stream.</p>
        </li><li>
          <p>If your function has been invoked correctly in response to your Amazon S3 trigger, you’ll see output similar to the following. The 
          <code class="code">CONTENT TYPE</code> you see depends on the type of file you uploaded to your bucket.</p>
          <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">2022-05-09T23:17:28.702Z	0cae7f5a-b0af-4c73-8563-a3430333cc10	INFO	CONTENT TYPE: <code class="replaceable">image/jpeg</code>
</code></pre>
        </li></ol></div>
     
     
   
    <h2 id="cleanup">Clean up your resources</h2>
     
    <p>You can now delete the resources that you created for this tutorial, unless you want to retain them. By deleting AWS resources that you're no longer using, you prevent unnecessary charges to your AWS account.</p>
    
    <div class="procedure"><h6>To delete the Lambda function</h6><ol><li>
    <p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the Lambda console.</p>
  </li><li>
    <p>Select the function that you created.</p>
  </li><li>
    <p>Choose <b>Actions</b>, <b>Delete</b>.</p>
  </li><li>
    <p>Type <code class="userinput">delete</code> in the text input field and choose <b>Delete</b>.</p>
  </li></ol></div>
    
    <div class="procedure"><h6>To delete the execution role</h6><ol><li>
    <p>Open the <a href="https://console.aws.amazon.com/iam/home#/roles" rel="noopener noreferrer" target="_blank"><span>Roles page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the IAM console.</p>
  </li><li>
    <p>Select the execution role that you created.</p>
  </li><li>
    <p>Choose <b>Delete</b>.</p>
  </li><li>
    <p>Enter the name of the role in the text input field and choose <b>Delete</b>.</p>
  </li></ol></div>
    
    <div class="procedure"><h6>To delete the S3 bucket</h6><ol><li>
    <p>Open the <a href="https://console.aws.amazon.com/s3/home#" rel="noopener noreferrer" target="_blank"><span>Amazon S3 console.</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
  </li><li>
    <p>Select the bucket you created.</p>
  </li><li>
    <p>Choose <b>Delete</b>.</p>
  </li><li>
    <p>Enter the name of the bucket in the text input field.</p>
  </li><li>
    <p>Choose <b>Delete bucket</b>.</p>
  </li></ol></div>
   
    <h2 id="next-steps">Next steps</h2>
    <p>Try the more advanced tutorial. In this tutorial, the Amazon S3 trigger invokes a function to <a href="./with-s3-tutorial.html">create a thumbnail image</a> for each image file that is uploaded to your
      bucket. This tutorial requires a moderate level of AWS and Lambda domain knowledge. You use the AWS Command Line Interface (AWS CLI)
      to create resources, and you create a .zip file archive deployment package for your function and its
      dependencies.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./with-s3.html">S3</div><div id="next" class="next-link" accesskey="n" href="./with-s3-tutorial.html">Tutorial: Use an Amazon S3 trigger to create thumbnails</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/with-s3-example.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/with-s3-example.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>