<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Troubleshoot deployment issues in Lambda - AWS Lambda</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="troubleshooting-deployment" /><meta name="default_state" content="troubleshooting-deployment" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/troubleshooting-deployment.html" /><meta name="description" content="Learn how to troubleshoot common deployment issues in Lambda" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Lambda" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/troubleshooting-deployment.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/troubleshooting-deployment.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/troubleshooting-deployment.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/troubleshooting-deployment.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/troubleshooting-deployment.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/troubleshooting-deployment.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/troubleshooting-deployment.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/troubleshooting-deployment.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/troubleshooting-deployment.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/troubleshooting-deployment.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/troubleshooting-deployment.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/troubleshooting-deployment.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/troubleshooting-deployment.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/troubleshooting-deployment.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/troubleshooting-deployment.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/troubleshooting-deployment.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/troubleshooting-deployment.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/troubleshooting-deployment.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/troubleshooting-deployment.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/troubleshooting-deployment.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/troubleshooting-deployment.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/troubleshooting-deployment.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS Lambda" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lambda'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Troubleshoot deployment issues in Lambda" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Troubleshoot deployment issues in Lambda - AWS Lambda</title><meta name="pdf" content="/pdfs/lambda/latest/dg/lambda-dg.pdf#troubleshooting-deployment" /><meta name="rss" content="lambda-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/troubleshooting-deployment.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/troubleshooting-deployment.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/troubleshooting-deployment.html" /><meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Troubleshooting issues in Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-troubleshooting.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Troubleshoot deployment issues in Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-troubleshooting.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lambda/latest/dg/lambda-dg.pdf#troubleshooting-deployment" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div><div id="page-toc-src"><a href="#troubleshooting-deployment-denied">General: Permission is denied / Cannot load such file</a><a href="#troubleshooting-deployment-updatefunctioncode">General: Error occurs when calling the UpdateFunctionCode</a><a href="#troubleshooting-deployment-PermanentRedirect">Amazon S3: Error Code PermanentRedirect.</a><a href="#troubleshooting-deployment-functionHandler1">General: Cannot find, cannot load, unable to import,
        class not found, no such file or directory</a><a href="#troubleshooting-deployment-functionHandler2">General: Undefined method handler</a><a href="#troubleshooting-deployment-LayerConversionFailed">Lambda: Layer conversion failed</a><a href="#troubleshooting-deployment-InvalidParameterValueException1">Lambda: InvalidParameterValueException
        or RequestEntityTooLargeException</a><a href="#troubleshooting-deployment-InvalidParameterValueException2">Lambda: InvalidParameterValueException</a><a href="#troubleshooting-deployment-quotas">Lambda: Concurrency and memory quotas</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="troubleshooting-deployment">Troubleshoot deployment issues in Lambda</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>When you update your function, Lambda deploys the change by launching new instances of the function with the
    updated code or settings. Deployment errors prevent the new version from being used and can arise from issues with
    your deployment package, code, permissions, or tools.</p><p>When you deploy updates to your function directly with the Lambda API or with a client such as the AWS CLI, you can
    see errors from Lambda directly in the output. If you use services like AWS CloudFormation, AWS CodeDeploy, or AWS CodePipeline, look for
    the response from Lambda in the logs or event stream for that service.</p>
    <h2 id="troubleshooting-deployment-denied">General: Permission is denied / Cannot load such file</h2>
    
    <p><b>Error:</b>
      <em>EACCES: permission denied, open '/var/task/index.js'</em></p>
    <p><b>Error:</b>
      <em>cannot load such file -- function</em></p>
    <p><b>Error:</b>
      <em>[Errno 13] Permission denied: '/var/task/function.py'</em></p>
    
    <p>The Lambda runtime needs permission to read the files in your deployment package. In Linux permissions octal notation, Lambda needs 644 permissions 
      for non-executable files (rw-r--r--) and 755 permissions (rwxr-xr-x) for directories and executable files.</p>
    <p>In Linux and MacOS, use the <code class="code">chmod</code> command to change file permissions on files and directories in your deployment package. For 
      example, to give an executable file the correct permissions, run the following command.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">chmod 755 &lt;filepath&gt;</code></code></pre>
    <p>To change file permissions in Windows, see <a href="https://learn.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731667(v=ws.10)" rel="noopener noreferrer" target="_blank"><span>Set, View, Change, or Remove Permissions on an Object</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 
    in the Microsoft Windows documentation.</p>
   
    <h2 id="troubleshooting-deployment-updatefunctioncode">General: Error occurs when calling the UpdateFunctionCode</h2>
    
    <p><b>Error:</b>
      <em>An error occurred (RequestEntityTooLargeException) when calling the UpdateFunctionCode
        operation</em></p>
    
    <p>When you upload a deployment package or layer archive directly to Lambda, the size of the ZIP file is limited to
      50 MB. To upload a larger file, store it in Amazon S3 and use the S3Bucket and S3Key parameters.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>When you upload a file directly with the AWS CLI, AWS SDK, or otherwise, the binary ZIP file is converted to
        base64, which increases its size by about 30%. To allow for this, and the size of other parameters in the request,
        the actual request size limit that Lambda applies is larger. Due to this, the 50 MB limit is approximate.</p></div></div>
   
    <h2 id="troubleshooting-deployment-PermanentRedirect">Amazon S3: Error Code PermanentRedirect.</h2>
    
    <p><b>Error:</b>
      <em>Error occurred while GetObject. S3 Error Code: PermanentRedirect. S3 Error Message: The bucket is in this
        region: us-east-2. Please use this region to retry the request</em></p>
    
    <p>When you upload a function's deployment package from an Amazon S3 bucket, the bucket must be in the same Region as
      the function. This issue can occur when you specify an Amazon S3 object in a call to <a href="./API_UpdateFunctionCode.html">UpdateFunctionCode</a>, or use the
      package and deploy commands in the AWS CLI or AWS SAM CLI. Create a deployment artifact bucket for each Region where
      you develop applications.</p>
   
    <h2 id="troubleshooting-deployment-functionHandler1">General: Cannot find, cannot load, unable to import,
        class not found, no such file or directory</h2>	
    
    <p><b>Error:</b>
      <em>Cannot find module 'function'</em></p>
    <p><b>Error:</b>
      <em>cannot load such file -- function</em></p>
    <p><b>Error:</b>
      <em>Unable to import module 'function'</em></p>
    <p><b>Error:</b>
      <em>Class not found: function.Handler</em></p>
    <p><b>Error:</b>
      <em>fork/exec /var/task/function: no such file or directory</em></p>
    <p><b>Error:</b>
      <em>Unable to load type 'Function.Handler' from assembly 'Function'.</em></p>	
    
    <p>The name of the file or class in your function's handler configuration doesn't match your code. See the
      following section for more information.</p>
   
    <h2 id="troubleshooting-deployment-functionHandler2">General: Undefined method handler</h2>	
    <p><b>Error:</b>
      <em>index.handler is undefined or not exported</em></p>
    <p><b>Error:</b>
      <em>Handler 'handler' missing on module 'function'</em></p>
    <p><b>Error:</b>
      <em>undefined method `handler' for #&lt;LambdaHandler:0x000055b76ccebf98&gt;</em></p>
    <p><b>Error:</b>
      <em>No public method named handleRequest with appropriate method signature found on class
        function.Handler</em></p>
    <p><b>Error:</b>
      <em>Unable to find method 'handleRequest' in type 'Function.Handler' from assembly
        'Function'</em></p>
    
    
    <p>The name of the handler method in your function's handler configuration doesn't match your code. Each runtime
      defines a naming convention for handlers, such as
      <code class="replaceable">filename</code>.<code class="replaceable">methodname</code>. The handler is the method in your
      function's code that the runtime runs when your function is invoked.</p>
    <p>For some languages, Lambda provides a library with an interface that expects a handler method to have a specific
      name. For details about handler naming for each language, see the following topics.</p>
    <div class="itemizedlist">
  
   
  
   
  
   
  
   
  
   
  
   
  
   
<ul class="itemizedlist"><li class="listitem">
    <p><a href="./lambda-nodejs.html">Building Lambda functions with Node.js</a></p>
  </li><li class="listitem">
    <p><a href="./lambda-python.html">Building Lambda functions with Python</a></p>
  </li><li class="listitem">
    <p><a href="./lambda-ruby.html">Building Lambda functions with Ruby</a></p>
  </li><li class="listitem">
    <p><a href="./lambda-java.html">Building Lambda functions with Java</a></p>
  </li><li class="listitem">
    <p><a href="./lambda-golang.html">Building Lambda functions with Go</a></p>
  </li><li class="listitem">
    <p><a href="./lambda-csharp.html">Building Lambda functions with C#</a></p>
  </li><li class="listitem">
    <p><a href="./lambda-powershell.html">Building Lambda functions with PowerShell</a></p>
  </li></ul></div>
   
    <h2 id="troubleshooting-deployment-LayerConversionFailed">Lambda: Layer conversion failed</h2>
    
    <p><b>Error:</b>
      <em>Lambda layer conversion failed. For advice on resolving this issue, see the Troubleshoot deployment issues in Lambda page in the 
      Lambda User Guide.</em></p>
    
    <p>When you configure a Lambda function with a layer, Lambda merges the layer with your function code. If this process fails to 
      complete, Lambda returns this error. If you encounter this error, take the following steps:
    </p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem"><p>Delete any unused files from your layer</p></li><li class="listitem"><p>Delete any symbolic links in your layer</p></li><li class="listitem"><p>Rename any files that have the same name as a directory in any of your function's layers</p></li></ul></div>
   
    <h2 id="troubleshooting-deployment-InvalidParameterValueException1">Lambda: InvalidParameterValueException
        or RequestEntityTooLargeException</h2>	
    
    
    <p><b>Error:</b>
      <em>InvalidParameterValueException: Lambda was unable to configure your environment variables because the
        environment variables you have provided exceeded the 4KB limit. String measured:
        <span>{</span>"A1":"uSFeY5cyPiPn7AtnX5BsM...</em></p>
    <p><b>Error:</b>
      <em>RequestEntityTooLargeException: Request must be smaller than 5120 bytes for the
        UpdateFunctionConfiguration operation</em></p>
    
    <p>The maximum size of the variables object that is stored in the function's configuration must not exceed 4096
      bytes. This includes key names, values, quotes, commas, and brackets. The total size of the HTTP request body is
      also limited.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "FunctionName": "my-function",
    "FunctionArn": "arn:aws:lambda:us-east-2:123456789012:function:my-function",
    "Runtime": "nodejs18.x",
    "Role": "arn:aws:iam::123456789012:role/lambda-role",
    "Environment": <span>{</span>
        "Variables": <code class="userinput"><span>{</span>
            "BUCKET": "my-bucket",
            "KEY": "file.txt"
        }</code>
    },
    ...
}</code></pre>
    <p>In this example, the object is 39 characters and takes up 39 bytes when it's stored (without white space) as the
      string <code class="code"><span>{</span>"BUCKET":"my-bucket","KEY":"file.txt"}</code>. Standard ASCII characters in environment variable
      values use one byte each. Extended ASCII and Unicode characters can use between 2 bytes and 4 bytes per
      character.</p>
   
    <h2 id="troubleshooting-deployment-InvalidParameterValueException2">Lambda: InvalidParameterValueException</h2>
    
    <p><b>Error:</b>
      <em>InvalidParameterValueException: Lambda was unable to configure your environment variables because the
        environment variables you have provided contains reserved keys that are currently not supported for
        modification.</em></p>
    
    <p>Lambda reserves some environment variable keys for internal use. For example, <code class="code">AWS_REGION</code> is used by
      the runtime to determine the current Region and cannot be overridden. Other variables, like <code class="code">PATH</code>, are
      used by the runtime but can be extended in your function configuration. For a full list, see <a href="./configuration-envvars.html#configuration-envvars-runtime">Defined runtime environment variables</a>.</p>
   
    <h2 id="troubleshooting-deployment-quotas">Lambda: Concurrency and memory quotas</h2>
    
	<p><b>Error:</b><em> Specified ConcurrentExecutions for function decreases account's
	  UnreservedConcurrentExecution below its minimum value</em></p>
  <p><b>Error:</b><em> 'MemorySize' value failed to satisfy constraint: Member must
    have value less than or equal to 3008</em></p>
    
    <p>These errors occur when you exceed the concurrency or memory <a href="./gettingstarted-limits.html">quotas</a>
      for your account. New AWS accounts have reduced concurrency and memory quotas. To resolve errors related to
      concurrency, you can <a href="https://docs.aws.amazon.com/servicequotas/latest/userguide/request-quota-increase.html">request a quota increase</a>.
      You cannot request memory quota increases.</p>
	<div class="itemizedlist">
     
     
    <ul class="itemizedlist"><li class="listitem">
      <p><b>Concurrency:</b> You might get an error if you try to create a function using
        reserved or provisioned concurrency, or if your per-function concurrency request (<a href="./API_PutFunctionConcurrency.html">PutFunctionConcurrency</a>)
        exceeds your account's concurrency quota.</p>
    </li><li class="listitem">
      <p><b>Memory:</b> Errors occur if the amount of memory allocated to the function
        exceeds your account's memory quota.</p>
    </li></ul></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./lambda-troubleshooting.html">Troubleshooting</div><div id="next" class="next-link" accesskey="n" href="./troubleshooting-invocation.html">Invocation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/troubleshooting-deployment.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/troubleshooting-deployment.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>