<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Connecting inbound interface VPC endpoints for Lambda - AWS Lambda</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="configuration-vpc-endpoints" /><meta name="default_state" content="configuration-vpc-endpoints" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-vpc-endpoints.html" /><meta name="description" content="You can use an interface VPC endpoint to create a private connection between your VPC and Lambda without requiring access over the internet or through a NAT device, VPN connection, or AWS Direct Connect connection." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Lambda" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-vpc-endpoints.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-vpc-endpoints.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS Lambda" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lambda'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Connecting inbound interface VPC endpoints for Lambda" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Connecting inbound interface VPC endpoints for Lambda - AWS Lambda</title><meta name="pdf" content="/pdfs/lambda/latest/dg/lambda-dg.pdf#configuration-vpc-endpoints" /><meta name="rss" content="lambda-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html" /><meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing,configure Lambda function,create Lambda function" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Configuring AWS Lambda functions",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-functions.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Connecting inbound interface VPC endpoints for Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-functions.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lambda/latest/dg/lambda-dg.pdf#configuration-vpc-endpoints" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div><div id="page-toc-src"><a href="#vpc-endpoint-considerations">Considerations for Lambda interface endpoints</a><a href="#vpc-endpoint-create">Creating an interface endpoint for Lambda</a><a href="#vpc-endpoint-policy">Creating an interface endpoint policy for Lambda</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="configuration-vpc-endpoints">Connecting inbound interface VPC endpoints for Lambda</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>If you use Amazon Virtual Private Cloud (Amazon VPC) to host your AWS resources, you can establish a connection between your VPC and
    Lambda. You can use this connection to invoke your Lambda function without crossing the public internet.</p><p>To establish a private connection between your VPC and Lambda, create an <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-interface.html">interface VPC endpoint</a>. Interface endpoints are powered
    by <a href="http://aws.amazon.com/privatelink" rel="noopener noreferrer" target="_blank"><span>AWS PrivateLink</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, which enables you to privately access Lambda APIs
    without an internet gateway, NAT device, VPN connection, or AWS Direct Connect connection. Instances in your VPC don't
    need public IP addresses to communicate with Lambda APIs. Traffic between your VPC and Lambda does not leave the AWS
    network.</p><p>Each interface endpoint is represented by one or more <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html">elastic network interfaces</a> in your subnets. A network
    interface provides a private IP address that serves as an entry point for traffic to Lambda.</p><div class="highlights" id="inline-topiclist"><h6>Sections</h6><ul><li><a href="#vpc-endpoint-considerations">Considerations for Lambda interface endpoints</a></li><li><a href="#vpc-endpoint-create">Creating an interface endpoint for Lambda</a></li><li><a href="#vpc-endpoint-policy">Creating an interface endpoint policy for Lambda</a></li></ul></div>
    <h2 id="vpc-endpoint-considerations">Considerations for Lambda interface endpoints</h2>
    <p>Before you set up an interface endpoint for Lambda, be sure to review <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-interface.html#vpce-interface-limitations">Interface endpoint properties and
        limitations</a> in the <em>Amazon VPC User Guide</em>.</p>
    <p>You can call any of the Lambda API operations from your VPC. For example, you can invoke the Lambda function by
      calling the <code class="code">Invoke</code> API from within your VPC. 
      For the full list of Lambda APIs, see <a href="https://docs.aws.amazon.com/lambda/latest/dg/API_Operations.html">Actions</a> in the Lambda API
      reference.</p>
    <p><code class="code">use1-az3</code> is a limited capacity Region for Lambda VPC functions. You shouldn't use subnets in 
      this availability zone with your Lambda functions because this can result in reduced zonal redundancy in the event of an outage.</p>
     
      <h3 id="vpc-endpoint-considerations-keepalive">Keep-alive for persistent connections</h3>
    <p>Lambda purges idle connections over time, so you must use a keep-alive directive to maintain persistent
      connections. Attempting to reuse an idle connection when invoking a function results in a connection error. To
      maintain your persistent connection, use the keep-alive directive associated with your runtime. For an example,
      see <a href="https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/node-reusing-connections.html">Reusing
        Connections with Keep-Alive in Node.js</a> in the <em>AWS SDK for JavaScript Developer Guide</em>.</p>
     
     
      <h3 id="vpc-endpoint-considerations-billing">Billing Considerations</h3>
      <p>There is no additional cost to access a Lambda function through an interface endpoint. For more Lambda pricing
        information, see <a href="http://aws.amazon.com/lambda/pricing/" rel="noopener noreferrer" target="_blank"><span>AWS Lambda Pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      <p>Standard pricing for AWS PrivateLink applies to interface endpoints for Lambda. Your AWS account is billed for
        every hour an interface endpoint is provisioned in each Availability Zone and for data processed through the
        interface endpoint. For more interface endpoint pricing information, see <a href="http://aws.amazon.com/privatelink/pricing/" rel="noopener noreferrer" target="_blank"><span>AWS PrivateLink pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
     
     
      <h3 id="vpc-endpoint-considerations-peering">VPC Peering Considerations</h3>
      <p>You can connect other VPCs to the VPC with interface endpoints using <a href="https://docs.aws.amazon.com/vpc/latest/peering/what-is-vpc-peering.html">VPC peering</a>. VPC peering is a networking connection
        between two VPCs. You can establish a VPC peering connection between your own two VPCs, or with a VPC in another
        AWS account. The VPCs can also be in two different AWS Regions.</p>
      <p>Traffic between peered VPCs stays on the AWS network and does not traverse the public internet. Once VPCs are
        peered, resources like Amazon Elastic Compute Cloud (Amazon EC2) instances, Amazon Relational Database Service (Amazon RDS) instances, or VPC-enabled Lambda functions in
        both VPCs can access the Lambda API through interface endpoints created in the one of the VPCs.</p>
     
   
    <h2 id="vpc-endpoint-create">Creating an interface endpoint for Lambda</h2>
    <p>You can create an interface endpoint for Lambda using either the Amazon VPC console or the AWS Command Line Interface (AWS CLI). For
      more information, see <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-interface.html#create-interface-endpoint">Creating an interface endpoint</a>
      in the <em>Amazon VPC User Guide</em>.</p>
    
    <div class="procedure"><h6>To create an interface endpoint for Lambda (console)</h6><ol><li>
        <p>Open the <a href="https://console.aws.amazon.com/vpc/home?#Endpoints" rel="noopener noreferrer" target="_blank"><span>Endpoints page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the Amazon VPC
          console.</p>
      </li><li>
        <p>Choose <b>Create Endpoint</b>.</p>
      </li><li>
        <p>For <b>Service category</b>, verify that <b>AWS services</b> is
          selected.</p>
      </li><li>
        <p>For <b>Service Name</b>, choose
            <b>com.amazonaws.<code class="replaceable">region</code>.lambda</b>. Verify that the
            <b>Type</b> is <b>Interface</b>.</p>
      </li><li>
        <p>Choose a VPC and subnets.</p>
      </li><li>
        <p>To enable private DNS for the interface endpoint, select the <b>Enable DNS Name</b> check
          box.</p>
      </li><li>
        <p>For <b>Security group</b>, choose one or more security groups.</p>
      </li><li>
        <p>Choose <b>Create endpoint</b>.</p>
      </li></ol></div>
    <p>To use the private DNS option, you must set the <code class="code">enableDnsHostnames</code> and
        <code class="code">enableDnsSupportattributes</code> of your VPC. For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html#vpc-dns-updating">Viewing and updating DNS support for your VPC</a>
      in the <em>Amazon VPC User Guide</em>. If you enable private DNS for the interface endpoint, you can make
      API requests to Lambda using its default DNS name for the Region, for example,
        <code class="code">lambda.us-east-1.amazonaws.com</code>. For more service endpoints, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws-service-information.html">Service endpoints and quotas</a> in the
        <em>AWS General Reference</em>.</p>
    <p>For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-interface.html#access-service-though-endpoint">Accessing a service through an
        interface endpoint</a> in the <em>Amazon VPC User Guide</em>.</p>
    <p>For information about creating and configuring an endpoint using AWS CloudFormation, see the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-vpcendpoint.html">AWS::EC2::VPCEndpoint</a>
      resource in the <em>AWS CloudFormation User Guide</em>.</p>
     
      <h6>To create an interface endpoint for Lambda (AWS CLI)</h6>
      <p>Use the <code class="code">create-vpc-endpoint</code> command and specify the VPC ID, VPC endpoint type (interface),
        service name, subnets that will use the endpoint, and security groups to associate with the endpoint's network
        interfaces. For example:</p>
     
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">
aws ec2 create-vpc-endpoint --vpc-id vpc-ec43eb89 --vpc-endpoint-type Interface --service-name \
   com.amazonaws.us-east-1.lambda --subnet-id subnet-abababab --security-group-id sg-1a2b3c4d      
    </code></pre>
   
    <h2 id="vpc-endpoint-policy">Creating an interface endpoint policy for Lambda</h2>
    <p>To control who can use your interface endpoint and which Lambda functions the user can access, you can attach
      an endpoint policy to your endpoint. The policy specifies the following information:</p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The principal that can perform actions.</p>
      </li><li class="listitem">
        <p>The actions that the principal can perform.</p>
      </li><li class="listitem">
        <p>The resources on which the principal can perform actions.</p>
      </li></ul></div>
    <p>For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-access.html">Controlling access to services with VPC endpoints</a> in the <em>Amazon VPC User Guide</em>.</p>
     
      <h6>Example: Interface endpoint policy for Lambda actions</h6>
      <p>The following is an example of an endpoint policy for Lambda. When attached to an endpoint, this policy
        allows user <code class="code">MyUser</code> to invoke the function <code class="code">my-function</code>.</p>
     
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You need to include both the qualified and the unqualified function ARN in the resource.</p></div></div>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
   "Statement":[
      <span>{</span>
         "Principal":
         <span>{</span> 
             "AWS": "arn:aws:iam::111122223333:user/MyUser" 
         },
         "Effect":"Allow",
         "Action":[
            "lambda:InvokeFunction"
         ],
         "Resource": [
               "arn:aws:lambda:us-east-2:123456789012:function:my-function",
               "arn:aws:lambda:us-east-2:123456789012:function:my-function:*"
            ]
      }
   ]
}</code></pre>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./configuration-vpc.html">Outbound networking</div><div id="next" class="next-link" accesskey="n" href="./configuration-filesystem.html">File system</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-vpc-endpoints.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>