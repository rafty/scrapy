<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Deploy .NET Lambda functions with container images - AWS Lambda</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="csharp-image" /><meta name="default_state" content="csharp-image" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-image.html" /><meta name="description" content="Deploy your .NET Lambda function code as a container image using an AWS provided base image or the runtime interface client." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Lambda" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-image.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/csharp-image.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/csharp-image.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/csharp-image.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/csharp-image.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-image.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-image.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/csharp-image.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/csharp-image.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/csharp-image.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/csharp-image.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/csharp-image.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/csharp-image.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/csharp-image.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/csharp-image.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/csharp-image.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/csharp-image.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/csharp-image.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/csharp-image.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/csharp-image.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/csharp-image.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/csharp-image.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS Lambda" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lambda'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Deploy .NET Lambda functions with container images" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Deploy .NET Lambda functions with container images - AWS Lambda</title><meta name="pdf" content="/pdfs/lambda/latest/dg/lambda-dg.pdf#csharp-image" /><meta name="rss" content="lambda-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-image.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-image.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-image.html" /><meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing,.NET 7,.NET 6,C#,Docker" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Building Lambda functions with C#",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-csharp.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Deploy .NET Lambda functions with container images",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-csharp.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lambda/latest/dg/lambda-dg.pdf#csharp-image" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div><div id="page-toc-src"><a href="#csharp-image-base">AWS base images for .NET</a><a href="#csharp-image-instructions">Using an AWS base image</a><a href="#csharp-image-clients">Using a non-AWS base image</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="csharp-image">Deploy .NET Lambda functions with container images</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>There are three ways to build a container image for a .NET Lambda function:</p><div class="itemizedlist">
     
	 
     
  <ul class="itemizedlist"><li class="listitem">
      <p><a href="#csharp-image-instructions">Using an AWS base image for .NET</a></p>
      <p>The <a href="./images-create.html#runtimes-images-lp">AWS base images</a> are preloaded with a language runtime, a runtime interface client to manage the interaction between Lambda and your function code, and a runtime interface emulator for local testing.</p>
    </li><li class="listitem">
      <p><a href="./images-create.html#runtimes-images-custom">Using an AWS base image for custom runtimes</a></p>
      <p>AWS <a href="https://gallery.ecr.aws/lambda/provided" rel="noopener noreferrer" target="_blank"><span>provides base images</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> that contain the Amazon Linux or Amazon Linux 2 operating system and the <a href="./images-test.html">runtime interface emulator</a>. You can <a href="./runtimes-custom.html">add your preferred runtime</a>, dependencies, and code to these images. To make the image compatible with Lambda, you must include the <a href="#csharp-image-clients">the runtime interface client for .NET</a> in the image.</p>
    </li><li class="listitem">
      <p><a href="#csharp-image-clients">Using a non-AWS base image</a></p>
      <p>You can use an alternative base image from another container registry, such as Alpine Linux or Debian. You can also use a custom image created by your organization. To make the image compatible with Lambda, you must include the <a href="#csharp-image-clients">the runtime interface client for .NET</a> in the image.</p>
    </li></ul></div><div class="awsdocs-note awsdocs-tip"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Tip</h6></div><div class="awsdocs-note-text"><p>To reduce the time it takes for Lambda container functions to become active, see <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#use-multi-stage-builds" rel="noopener noreferrer" target="_blank"><span>Use multi-stage builds</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the Docker documentation. To build efficient container images, follow the <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" rel="noopener noreferrer" target="_blank"><span>Best practices for writing Dockerfiles</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div><p>This page explains how to build, test, and deploy container images for Lambda.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#csharp-image-base">AWS base images for .NET</a></li><li><a href="#csharp-image-instructions">Using an AWS base image for .NET</a></li><li><a href="#csharp-image-clients">Using an alternative base image with the runtime interface client</a></li></ul></div>
    <h2 id="csharp-image-base">AWS base images for .NET</h2>
    <p>AWS provides the following base images for .NET:</p>
    
    <div class="table-container"><div class="table-contents"><table id="w917aac69c32c15b7"><thead>
          <tr>
            <th>Tags</th>
            <th>Runtime</th>
            <th>Operating system</th>
            <th>Dockerfile</th>
            <th>Deprecation</th>
          </tr>
        </thead>
      <tr>
            <td tabindex="-1"><p>7</p></td>
            <td tabindex="-1">.NET 7</td>
            <td tabindex="-1">Amazon Linux 2</td>
            <td tabindex="-1"><a href="https://github.com/aws/aws-lambda-base-images/blob/dotnet7/Dockerfile.dotnet7" rel="noopener noreferrer" target="_blank"><span>Dockerfile
                for .NET 7 on GitHub</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></td>
            <td tabindex="-1">
              <p>May 14, 2024</p>
            </td>  
          </tr>
      <tr>
            <td tabindex="-1"><p>6</p></td>
            <td tabindex="-1">.NET 6</td>
            <td tabindex="-1">Amazon Linux 2</td>
            <td tabindex="-1"><a href="https://github.com/aws/aws-lambda-base-images/blob/dotnet6/Dockerfile.dotnet6" rel="noopener noreferrer" target="_blank"><span>Dockerfile
                for .NET 6 on GitHub</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></td>
            <td tabindex="-1">
              <p></p>
            </td>  
          </tr>
    </table></div></div>
    <p>Amazon ECR repository: <a href="https://gallery.ecr.aws/lambda/dotnet" rel="noopener noreferrer" target="_blank"><span>gallery.ecr.aws/lambda/dotnet</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
   
    <h2 id="csharp-image-instructions">Using an AWS base image for .NET</h2>
     
      <h3 id="dotnet-csharp-image-prerequisites">Prerequisites</h3>
      <div class="itemizedlist">
        <p>To complete the steps in this section, you must have the following:</p>
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><a href="https://dotnet.microsoft.com/download" rel="noopener noreferrer" target="_blank"><span>.NET SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – The following steps use the
            .NET 7 base image. Make sure that your .NET version matches the version of the <a href="https://gallery.ecr.aws/lambda/dotnet" rel="noopener noreferrer" target="_blank"><span>base image</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> that you specify in your Dockerfile.</p>
        </li><li class="listitem">
          <p><a href="https://docs.docker.com/get-docker" rel="noopener noreferrer" target="_blank"><span>Docker</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
        </li></ul></div>
     
     
      <h3 id="dotnet-image-create">Creating and deploying an image using a base image</h3>
      <p>In the following steps, you use <a href="https://github.com/aws/aws-lambda-dotnet#dotnet-cli-templates" rel="noopener noreferrer" target="_blank"><span>Amazon.Lambda.Templates</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and <a href="https://github.com/aws/aws-extensions-for-dotnet-cli#aws-lambda-amazonlambdatools" rel="noopener noreferrer" target="_blank"><span>Amazon.Lambda.Tools</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
        to create a .NET project. Then, you build a Docker image, upload the image to Amazon ECR, and deploy it to a Lambda
        function.</p>
      <div class="procedure"><ol><li>
          <p>Install the <a href="https://github.com/aws/aws-lambda-dotnet#dotnet-cli-templates" rel="noopener noreferrer" target="_blank"><span>Amazon.Lambda.Templates</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> NuGet package.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">dotnet new install Amazon.Lambda.Templates</code></pre>
        </li><li>
          <p>Create a .NET project using the <code class="code">lambda.image.EmptyFunction</code> template.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">dotnet new lambda.image.EmptyFunction --name <code class="replaceable">MyFunction</code> --region <code class="replaceable">us-east-1</code></code></pre>
        </li><li>
          <p>Navigate to the <code class="code"><code class="replaceable">MyFunction</code>/src/<code class="replaceable">MyFunction</code></code> directory. This is where the project files are stored. Examine the following files:</p>
          <div class="itemizedlist">
             
             
             
             
          <ul class="itemizedlist"><li class="listitem">
              <p><b>aws-lambda-tools-defaults.json</b> – This file is where you
                specify the command line options when deploying your Lambda function.</p>
            </li><li class="listitem">
              <p><b>Function.cs</b> – Your Lambda handler function code. This is a C#
                template that includes the default <code class="code">Amazon.Lambda.Core</code> library and a default
                  <code class="code">LambdaSerializer</code> attribute. For more information about serialization requirements and
                options, see <a href="./csharp-handler.html#csharp-handler-serializer">Serialization in Lambda functions</a>. You
                can use the provided code for testing, or replace it with your own.</p>
            </li><li class="listitem">
              <p><b>MyFunction.csproj</b> – A .NET <a href="https://learn.microsoft.com/en-us/dotnet/core/project-sdk/overview#project-files" rel="noopener noreferrer" target="_blank"><span>project
                  file</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, which lists the files and assemblies that comprise your application.</p>
            </li><li class="listitem">
              <p><b>Readme.md</b> – This file contains more information about the
                sample Lambda function.</p>
            </li></ul></div>
        </li><li>
          <p>Examine the Dockerfile in the <code class="code">src/<code class="replaceable">MyFunction</code></code> directory. You can
            use the provided Dockerfile for testing, or replace it with your own. If you use your own, make sure
            to:</p>
          <div class="itemizedlist">
             
             
          <ul class="itemizedlist"><li class="listitem">
              <p>Set the <code class="code">FROM</code> property to the <a href="https://gallery.ecr.aws/lambda/dotnet" rel="noopener noreferrer" target="_blank"><span>URI of
                  the base image</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Your .NET version must match the version of the base image.</p>
            </li><li class="listitem">
              <p>Set the <code class="code">CMD</code> argument to the Lambda function handler. This should match the
                  <code class="code">image-command</code> in <code>aws-lambda-tools-defaults.json</code>.</p>
            </li></ul></div>
          <div class="example"><h6>Example  Dockerfile</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="dockerfile "># You can also pull these images from DockerHub amazon/aws-lambda-dotnet:7
FROM <code class="replaceable">public.ecr.aws/lambda/dotnet:7</code>
  
# Copy function code
COPY publish/* $<span>{</span>LAMBDA_TASK_ROOT}
  
# Set the CMD to your handler (could also be done as a parameter override outside of the Dockerfile)
CMD [ "<code class="replaceable">MyFunction::MyFunction.Function::FunctionHandler</code>" ]</code></pre></div></div>
        </li><li>
          <p>Install the Amazon.Lambda.Tools <a href="http://aws.amazon.com/blogs/developer/net-core-global-tools-for-aws/" rel="noopener noreferrer" target="_blank"><span>.NET
              Global Tool</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">dotnet tool install -g Amazon.Lambda.Tools</code></pre>
          <p>If Amazon.Lambda.Tools is already installed, make sure that you have the latest version.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">dotnet tool update -g Amazon.Lambda.Tools</code></pre>
        </li><li>
          <p>Change the directory to
                <code class="code"><code class="replaceable">MyFunction</code>/src/<code class="replaceable">MyFunction</code></code>, if you're
            not there already.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">cd src/<code class="replaceable">MyFunction</code></code></pre>
        </li><li>
          <p>Use Amazon.Lambda.Tools to build the Docker image, push it to a new Amazon ECR repository, and deploy the
            Lambda function.</p>
          <p>For <code class="code">--function-role</code>, specify the role name—not the Amazon Resource Name
            (ARN)—of the <a href="./lambda-intro-execution-role.html">execution role</a> for the function. For
            example, <code class="code">lambda-role</code>.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">dotnet lambda deploy-function <code class="replaceable">MyFunction</code> --function-role <code class="replaceable">lambda-role</code></code></pre>
          <p>For more information about the Amazon.Lambda.Tools .NET Global Tool, see the <a href="https://github.com/aws/aws-extensions-for-dotnet-cli" rel="noopener noreferrer" target="_blank"><span>AWS Extensions for .NET CLI</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository on
            GitHub.</p>
        </li><li>
          <p>Invoke the function.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">dotnet lambda invoke-function <code class="replaceable">MyFunction</code> --payload "Testing the function"</code></pre>
          <p>If everything is successful, you see the following:</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">Payload:
"TESTING THE FUNCTION"

Log Tail:
START RequestId: <code class="replaceable">id</code> Version: $LATEST
END RequestId: <code class="replaceable">id</code>
REPORT RequestId: <code class="replaceable">id</code>  Duration: 0.99 ms       Billed Duration: 1 ms         Memory Size: 256 MB     Max Memory Used: 12 MB</code></pre>
        </li><li>
          <p>Delete the Lambda function.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">dotnet lambda delete-function <code class="replaceable">MyFunction</code></code></pre>
      </li></ol></div>
     
   
    <h2 id="csharp-image-clients">Using an alternative base image with the runtime interface client</h2>
    If you use a <a href="./images-create.html#runtimes-images-custom">base image for custom runtimes</a> or an alternative base image, you must include the runtime interface client in your image. The runtime interface client extends the <a href="./runtimes-api.html">Lambda runtime API</a>, which manages the interaction between Lambda and your function code.
    <p>The following example demonstrates how to build a container image for .NET using a non-AWS base image, and how to add the <a href="https://github.com/aws/aws-lambda-dotnet/blob/master/Libraries/src/Amazon.Lambda.RuntimeSupport/README.md#using-amazonlambdaruntimesupport-as-a-class-library" rel="noopener noreferrer" target="_blank"><span>Amazon.Lambda.RuntimeSupport package</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, which is the Lambda runtime interface client for .NET. The example Dockerfile uses the Microsoft .NET 7 base image.</p>
     
      <h3 id="dotnet-csharp-alt-prerequisites">Prerequisites</h3>
      <div class="itemizedlist">
        <p>To complete the steps in this section, you must have the following:</p>
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><a href="https://dotnet.microsoft.com/download" rel="noopener noreferrer" target="_blank"><span>.NET SDK</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – The following steps use a
            .NET 7 base image. Make sure that your .NET version matches the version of the <a href="https://gallery.ecr.aws/lambda/dotnet" rel="noopener noreferrer" target="_blank"><span>base image</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> that you specify in your Dockerfile.</p>
        </li><li class="listitem">
          <p><a href="https://docs.docker.com/get-docker" rel="noopener noreferrer" target="_blank"><span>Docker</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
        </li></ul></div>
     
     
      <h3 id="dotnet-alt-create">Creating and deploying an image using an alternative base image</h3>

      <div class="procedure"><ol><li>
          <p>Install the <a href="https://github.com/aws/aws-lambda-dotnet#dotnet-cli-templates" rel="noopener noreferrer" target="_blank"><span>Amazon.Lambda.Templates</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> NuGet package.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">dotnet new install Amazon.Lambda.Templates</code></pre>
        </li><li>
          <p>Create a .NET project using the <code class="code">lambda.CustomRuntimeFunction</code> template. This template includes the <a href="https://github.com/aws/aws-lambda-dotnet/blob/master/Libraries/src/Amazon.Lambda.RuntimeSupport/README.md#using-amazonlambdaruntimesupport-as-a-class-library" rel="noopener noreferrer" target="_blank"><span>Amazon.Lambda.RuntimeSupport</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> package.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">dotnet new lambda.CustomRuntimeFunction --name <code class="replaceable">MyFunction</code> --region <code class="replaceable">us-east-1</code></code></pre>
        </li><li>
          <p>Navigate to the <code class="code"><code class="replaceable">MyFunction</code>/src/<code class="replaceable">MyFunction</code></code> directory. This is where the project files are stored. Examine the following files:</p>
          <div class="itemizedlist">
             
             
             
             
          <ul class="itemizedlist"><li class="listitem">
              <p><b>aws-lambda-tools-defaults.json</b> – This file is where you
                specify the command line options when deploying your Lambda function.</p>
            </li><li class="listitem">
              <p><b>Function.cs</b> – The code contains a class with a <code class="code">Main</code> method that initializes the <code class="code">Amazon.Lambda.RuntimeSupport</code> library as the bootstrap. The <code class="code">Main</code> method is the entry point for the function's process. The <code class="code">Main</code> method wraps the function handler in a wrapper that the bootstrap can work with. For more information, see <a href="https://github.com/aws/aws-lambda-dotnet/blob/master/Libraries/src/Amazon.Lambda.RuntimeSupport/README.md#using-amazonlambdaruntimesupport-as-a-class-library" rel="noopener noreferrer" target="_blank"><span>Using Amazon.Lambda.RuntimeSupport as a class library</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the GitHub repository.</p>
            </li><li class="listitem">
              <p><b>MyFunction.csproj</b> – A .NET <a href="https://learn.microsoft.com/en-us/dotnet/core/project-sdk/overview#project-files" rel="noopener noreferrer" target="_blank"><span>project
                  file</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, which lists the files and assemblies that comprise your application.</p>
            </li><li class="listitem">
              <p><b>Readme.md</b> – This file contains more information about the
                sample Lambda function.</p>
            </li></ul></div>
        </li><li>
          <p>Open the <code>aws-lambda-tools-defaults.json</code> file and Add the following lines:</p>
                      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">  <code class="replaceable">"package-type": "image",</code>
  <code class="replaceable">"docker-host-build-output-dir": "./bin/Release/lambda-publish"</code></code></pre>
          <div class="itemizedlist">
             
             
          <ul class="itemizedlist"><li class="listitem">
              <p><b>package-type</b>: Defines the deployment package as a container image.</p>
            </li><li class="listitem">
              <p><b>docker-host-build-output-dir</b>: Sets the output directory for the build process.</p>
            </li></ul></div>
          <div class="example"><h6>Example  aws-lambda-tools-defaults.json</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Information": [
    "This file provides default values for the deployment wizard inside Visual Studio and the AWS Lambda commands added to the .NET Core CLI.",
    "To learn more about the Lambda commands with the .NET Core CLI execute the following command at the command line in the project root directory.",
    "dotnet lambda help",
    "All the command line options for the Lambda command can be specified in this file."
  ],
  "profile": "",
  "region": "us-east-1",
  "configuration": "Release",
  "function-runtime": "provided.al2",
  "function-memory-size": 256,
  "function-timeout": 30,
  "function-handler": "bootstrap",
  "msbuild-parameters": "--self-contained true",
  <code class="replaceable">"package-type": "image",</code>
  <code class="replaceable">"docker-host-build-output-dir": "./bin/Release/lambda-publish"</code>
}</code></pre></div></div>
        </li><li>
          <p>Create a Dockerfile in the <code class="code"><code class="replaceable">MyFunction</code>/src/<code class="replaceable">MyFunction</code></code> directory. The following example Dockerfile uses a Microsoft .NET base image instead of an <a href="#csharp-image-base">AWS base image</a>.</p>
          <div class="itemizedlist">
             
			       
			       
          <ul class="itemizedlist"><li class="listitem">
              <p>Set the <code class="code">FROM</code> property to the base image identifier. Your .NET version must match the version of the base image.</p>
            </li><li class="listitem">
              <p>Use the <code class="code">COPY</code> command to copy the function into the <code class="code">/var/task</code> directory.</p>
            </li><li class="listitem">
				      <p>Set the <code class="code">ENTRYPOINT</code> to the module that you want the Docker container to run when it starts. In this case, the module is the bootstrap, which initializes the <code class="code">Amazon.Lambda.RuntimeSupport</code> library.</p>
			      </li></ul></div>
          <div class="example"><h6>Example  Dockerfile</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="dockerfile "># You can also pull these images from DockerHub amazon/aws-lambda-dotnet:7
FROM <code class="replaceable">mcr.microsoft.com/dotnet/runtime:7.0</code>

# Set the image's internal work directory
WORKDIR /var/task
  
# Copy function code
COPY "bin/Release/net7.0/linux-x64"  .
  
# Set the entrypoint to the bootstrap
ENTRYPOINT ["<code class="replaceable">/usr/bin/dotnet", "exec", "/var/task/bootstrap.dll</code>"]</code></pre></div></div>
        </li><li>
          <p>Install the Amazon.Lambda.Tools <a href="http://aws.amazon.com/blogs/developer/net-core-global-tools-for-aws/" rel="noopener noreferrer" target="_blank"><span>.NET
              Global Tools extension</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">dotnet tool install -g Amazon.Lambda.Tools</code></pre>
          <p>If Amazon.Lambda.Tools is already installed, make sure that you have the latest version.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">dotnet tool update -g Amazon.Lambda.Tools</code></pre>
        </li><li>
          <p>Use Amazon.Lambda.Tools to build the Docker image, push it to a new Amazon ECR repository, and deploy the
            Lambda function.</p>
          <p>For <code class="code">--function-role</code>, specify the role name—not the Amazon Resource Name
            (ARN)—of the <a href="./lambda-intro-execution-role.html">execution role</a> for the function. For
            example, <code class="code">lambda-role</code>.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">dotnet lambda deploy-function <code class="replaceable">MyFunction</code> --function-role <code class="replaceable">lambda-role</code></code></pre>
          <p>For more information about the Amazon.Lambda.Tools .NET CLI extension, see the <a href="https://github.com/aws/aws-extensions-for-dotnet-cli" rel="noopener noreferrer" target="_blank"><span>AWS Extensions for .NET CLI</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository on
            GitHub.</p>
        </li><li>
          <p>Invoke the function.</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">dotnet lambda invoke-function <code class="replaceable">MyFunction</code> --payload "Testing the function"</code></pre>
          <p>If everything is successful, you see the following:</p>
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">Payload:
"TESTING THE FUNCTION"

Log Tail:
START RequestId: <code class="replaceable">id</code> Version: $LATEST
END RequestId: <code class="replaceable">id</code>
REPORT RequestId: <code class="replaceable">id</code>  Duration: 0.99 ms       Billed Duration: 1 ms         Memory Size: 256 MB     Max Memory Used: 12 MB</code></pre>
        </li><li>
        <p>Delete the Lambda function.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">dotnet lambda delete-function <code class="replaceable">MyFunction</code></code></pre>
      </li></ol></div>
     
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./csharp-package-asp.html">Deploy ASP.NET applications</div><div id="next" class="next-link" accesskey="n" href="./dotnet-native-aot.html">Native AOT compilation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-image.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/csharp-image.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>