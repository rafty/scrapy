<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using Lambda environment variables - AWS Lambda</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="configuration-envvars" /><meta name="default_state" content="configuration-envvars" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html" /><meta name="description" content="Learn how to use environment variables in Lambda. Use environment variables to adjust functions without updating code." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Lambda" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/configuration-envvars.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lambda/latest/dg/configuration-envvars.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/configuration-envvars.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lambda/latest/dg/configuration-envvars.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/configuration-envvars.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/configuration-envvars.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/configuration-envvars.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lambda/latest/dg/configuration-envvars.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/configuration-envvars.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lambda/latest/dg/configuration-envvars.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/configuration-envvars.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/configuration-envvars.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/configuration-envvars.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/configuration-envvars.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/configuration-envvars.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lambda/latest/dg/configuration-envvars.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/configuration-envvars.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/configuration-envvars.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html" hreflang="x-default" /><meta name="feedback-item" content="Lambda" /><meta name="this_doc_product" content="AWS Lambda" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lambda'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Using Lambda environment variables" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using Lambda environment variables - AWS Lambda</title><meta name="pdf" content="/pdfs/lambda/latest/dg/lambda-dg.pdf#configuration-envvars" /><meta name="rss" content="lambda-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-envvars.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-envvars.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-envvars.html" /><meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing,configure Lambda function,create Lambda function,environment variables,configure environment variables,set environment variables,get environment variables,default environment variables,reserved environment variables,encrypt environment variables,example environment variables" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Lambda",
        "item" : "https://docs.aws.amazon.com/lambda/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Configuring AWS Lambda functions",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-functions.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Using Lambda environment variables",
        "item" : "https://docs.aws.amazon.com/lambda/latest/dg/lambda-functions.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lambda/latest/dg/lambda-dg.pdf#configuration-envvars" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div><div id="page-toc-src"><a href="#configuration-envvars-config">Configuring environment variables</a><a href="#configuration-envvars-api">Configuring environment variables with the API</a><a href="#configuration-envvars-example">Example scenario for environment variables</a><a href="#configuration-envvars-retrieve">Retrieve environment variables</a><a href="#configuration-envvars-runtime">Defined runtime environment variables</a><a href="#configuration-envvars-encryption">Securing environment variables</a><a href="#configuration-envvars-samples">Sample code and templates</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="configuration-envvars">Using Lambda environment variables</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use environment variables to adjust your function's behavior without updating code. An environment
    variable is a pair of strings that is stored in a function's version-specific configuration. The Lambda runtime makes
    environment variables available to your code and sets additional environment variables that contain information
    about the function and invocation request.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>To increase database security, we recommend that you use AWS Secrets Manager instead of environment variables to store
      database credentials. For more information, see <a href="./services-rds.html">Using AWS Lambda with Amazon RDS</a>.</p></div></div><p>Environment variables are not evaluated before the function invocation. Any value you define is considered a
    literal string and not expanded. Perform the variable evaluation in your function code.</p><div class="highlights" id="inline-topiclist"><h6>Sections</h6><ul><li><a href="#configuration-envvars-config">Configuring environment variables</a></li><li><a href="#configuration-envvars-api">Configuring environment variables with the API</a></li><li><a href="#configuration-envvars-example">Example scenario for environment variables</a></li><li><a href="#configuration-envvars-retrieve">Retrieve environment variables</a></li><li><a href="#configuration-envvars-runtime">Defined runtime environment variables</a></li><li><a href="#configuration-envvars-encryption">Securing environment variables</a></li><li><a href="#configuration-envvars-samples">Sample code and templates</a></li></ul></div>
    <h2 id="configuration-envvars-config">Configuring environment variables</h2>
    <p>You define environment variables on the unpublished version of your function. When you publish a version, the
      environment variables are locked for that version along with other <a href="./configuration-function-common.html">version-specific configuration</a>.</p>
    <p>You create an environment variable for your function by defining a key and a value. Your function uses the
      name of the key to retrieve the value of the environment variable.</p>
    <div class="procedure"><h6>To set environment variables in the Lambda console</h6><ol><li><p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the Lambda console.</p></li><li>
        <p>Choose a function.</p>
      </li><li>
        <p>Choose <b>Configuration</b>, then choose <b>Environment variables</b>.</p>
      </li><li>
        <p>Under <b>Environment variables</b>, choose <b>Edit</b>.</p>
      </li><li>
        <p>Choose <b>Add environment variable</b>.</p>
      </li><li>
        <p>Enter a key and value.</p>
        <div class="itemizedlist">
          <h6>Requirements</h6>
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>Keys start with a letter and are at least two characters.</p>
          </li><li class="listitem">
            <p>Keys only contain letters, numbers, and the underscore character (<code class="code">_</code>).</p>
          </li><li class="listitem">
            <p>Keys aren't <a href="#configuration-envvars-runtime">reserved by Lambda</a>.</p>
          </li><li class="listitem">
            <p>The total size of all environment variables doesn't exceed 4 KB.</p>
          </li></ul></div>
      </li><li>
        <p>Choose <b>Save</b>.</p>
      </li></ol></div>
    <div class="procedure"><h6>To generate a list of environment variables in the console code editor</h6><p>You can generate a list of environment variables in the Lambda code editor. This is a quick way to reference
        your environment variables while you code.</p><ol><li>
        <p>Choose the <b>Code</b> tab.</p>
      </li><li>
        <p>Choose the <b>Environment Variables</b> tab.</p>
      </li><li>
        <p>Choose <b>Tools</b>, <b>Show Environment Variables</b>.</p>
      </li></ol></div>
    <p>Environment variables remain encrypted when listed in the console code editor. If you enabled encryption helpers for encryption in transit, then those settings remain unchanged. For more information, see <a href="#configuration-envvars-encryption">Securing environment variables</a>.</p>
<p>The environment variables list is read-only and is available only on the Lambda console. This file is not included when you download the function's .zip file archive, and you can't add environment variables by uploading this file.</p>
   
    <h2 id="configuration-envvars-api">Configuring environment variables with the API</h2>
    <p>To manage environment variables with the AWS CLI or AWS SDK, use the following API operations.</p>
    
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem"><p><a href="./API_UpdateFunctionConfiguration.html">UpdateFunctionConfiguration</a></p></li><li class="listitem"><p><a href="./API_GetFunctionConfiguration.html">GetFunctionConfiguration</a></p></li><li class="listitem"><p><a href="./API_CreateFunction.html">CreateFunction</a></p></li></ul></div>

    
    <p>The following example sets two environment variables on a function named <code class="code">my-function</code>.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda update-function-configuration --function-name my-function \
    --environment "Variables=<span>{</span>BUCKET=my-bucket,KEY=file.txt}"</code></code></pre>
    <p>When you apply environment variables with the <code class="code">update-function-configuration</code> command, the entire
      contents of the <code class="code">Variables</code> structure is replaced. To retain existing environment variables when you
      add a new one, include all existing values in your request.</p>
    <p>To get the current configuration, use the <code class="code">get-function-configuration</code> command.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda get-function-configuration --function-name my-function</code></code></pre>
    <p>You should see the following output:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "FunctionName": "my-function",
    "FunctionArn": "arn:aws:lambda:us-east-2:123456789012:function:my-function",
    "Runtime": "nodejs18.x",
    "Role": "arn:aws:iam::123456789012:role/lambda-role",
    "Environment": <span>{</span>
        "Variables": <span>{</span>
            "BUCKET": "my-bucket",
            "KEY": "file.txt"
        }
    },
    "RevisionId": "0894d3c1-2a3d-4d48-bf7f-abade99f3c15",
    ...
}</code></pre>
    <p>You can pass the revision ID from the output of <code class="code">get-function-configuration</code> as a parameter to
        <code class="code">update-function-configuration</code>. This ensures that the values don't change between when you read the
      configuration and when you update it.</p>
    
    <p>To configure a function's encryption key, set the <code class="code">KMSKeyARN</code> option.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws lambda update-function-configuration --function-name my-function \
   --kms-key-arn arn:aws:kms:us-east-2:123456789012:key/055efbb4-xmpl-4336-ba9c-538c7d31f599</code></code></pre>
   
    <h2 id="configuration-envvars-example">Example scenario for environment variables</h2>
    
    <p>You can use environment variables to customize function behavior in your test environment and production
      environment. For example, you can create two functions with the same code but different configurations. One
      function connects to a test database, and the other connects to a production database. In this situation, you use
      environment variables to pass the hostname and other connection details for the database to the function. </p>
    <p>The following example shows how to define the database host and database name as environment variables.</p>
    <div class="mediaobject">
       
        <img src="/images/lambda/latest/dg/images/console-env.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Environment variables in the Lambda console.&#xA;      " style="max-width:100%" />
       
       
    </div>
    <p>If you want your test environment to generate more debug information than the production environment, you
      could set an environment variable to configure your test environment to use more verbose logging or more detailed
      tracing.</p>
   
    <h2 id="configuration-envvars-retrieve">Retrieve environment variables</h2>
    
    <p>To retrieve environment variables in your function code, use the standard method for your programming
      language.</p>
    <awsdocs-tabs><dl style="display: none">
      <dt>Node.js</dt><dd tab-id="node.js">
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nodejs ">let region = process.env.AWS_REGION</code></pre>
        </dd>
      <dt>Python</dt><dd tab-id="python">
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import os
  region = os.environ['AWS_REGION']</code></pre>
          <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In some cases, you may need to use the following format:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">region = os.environ.get('AWS_REGION')</code></pre></div></div>
        </dd>
      <dt>Ruby</dt><dd tab-id="ruby">
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="ruby ">region = ENV["AWS_REGION"]</code></pre>
        </dd>
      <dt>Java</dt><dd tab-id="java">
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">String region = System.getenv("AWS_REGION");</code></pre>
        </dd>
      <dt>Go</dt><dd tab-id="go">
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="go ">var region = os.Getenv("AWS_REGION")</code></pre>
        </dd>
      <dt>C#</dt><dd tab-id="c#">
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="csharp ">string region = Environment.GetEnvironmentVariable("AWS_REGION");</code></pre>
        </dd>
      <dt>PowerShell</dt><dd tab-id="powershell">
          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="powershell ">$region = $env:AWS_REGION</code></pre>
        </dd>
    </dl></awsdocs-tabs>
    
    <p>Lambda stores environment variables securely by encrypting them at rest. You can <a href="#configuration-envvars-encryption">configure Lambda to use a different encryption key</a>, encrypt
      environment variable values on the client side, or set environment variables in an AWS CloudFormation template with
      AWS Secrets Manager.</p>
    
   
    <h2 id="configuration-envvars-runtime">Defined runtime environment variables</h2>
    
    <p>Lambda <a href="./lambda-runtimes.html">runtimes</a> set several environment variables during initialization.
      Most of the environment variables provide information about the function or runtime. The keys for these
      environment variables are <em>reserved</em> and cannot be set in your function configuration.</p>
    <div class="itemizedlist">
      <h6>Reserved environment variables</h6>
       
       
       
       
       
       
       
       
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><code class="code">_HANDLER</code> – The handler location configured on the function.</p>
      </li><li class="listitem">
        <p><code class="code">_X_AMZN_TRACE_ID</code> – The <a href="./services-xray.html">X-Ray tracing
          header</a>. This environment variable is not defined for custom runtimes (for example, runtimes that use the <code class="code">provided</code> or <code class="code">provided.al2</code> identifiers). You can set <code class="code">_X_AMZN_TRACE_ID</code> for custom runtimes using the <code class="code">Lambda-Runtime-Trace-Id</code> response header from the <a href="./runtimes-api.html#runtimes-api-next">Next invocation</a>.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_DEFAULT_REGION</code> – The default AWS Region where the Lambda function is executed.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_REGION</code> – The AWS Region where the Lambda function is executed. If defined, this value overrides the <code class="code">AWS_DEFAULT_REGION</code>.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_EXECUTION_ENV</code> – The <a href="./lambda-runtimes.html">runtime identifier</a>,
          prefixed by <code class="code">AWS_Lambda_</code> (for example, <code class="code">AWS_Lambda_java8</code>). This environment variable is not defined for custom runtimes (for example, runtimes that use the <code class="code">provided</code> or <code class="code">provided.al2</code> identifiers).</p>
      </li><li class="listitem">
        <p><code class="code">AWS_LAMBDA_FUNCTION_NAME</code> – The name of the function.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_LAMBDA_FUNCTION_MEMORY_SIZE</code> – The amount of memory available to the function in
          MB.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_LAMBDA_FUNCTION_VERSION</code> – The version of the function being
          executed.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_LAMBDA_INITIALIZATION_TYPE</code> – The initialization type of the function, which is <code class="code">on-demand</code>, <code class="code">provisioned-concurrency</code>, or <code class="code">snap-start</code>. For information, see <a href="./provisioned-concurrency.html"> Configuring provisioned concurrency</a> or <a href="./snapstart.html">Improving startup performance with Lambda SnapStart</a>.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_LAMBDA_LOG_GROUP_NAME</code>, <code class="code">AWS_LAMBDA_LOG_STREAM_NAME</code> – The name of the
          Amazon CloudWatch Logs group and stream for the function. The <code class="code">AWS_LAMBDA_LOG_GROUP_NAME</code> and <code class="code">AWS_LAMBDA_LOG_STREAM_NAME</code> environment variables are not available in Lambda SnapStart functions.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_ACCESS_KEY</code>, <code class="code">AWS_ACCESS_KEY_ID</code>, <code class="code">AWS_SECRET_ACCESS_KEY</code>, <code class="code">AWS_SESSION_TOKEN</code>
          – The access keys obtained from the function's <a href="./lambda-intro-execution-role.html">execution
            role</a>.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_LAMBDA_RUNTIME_API</code> – (<a href="./runtimes-custom.html">Custom runtime</a>) The
          host and port of the <a href="./runtimes-api.html">runtime API</a>.</p>
      </li><li class="listitem">
        <p><code class="code">LAMBDA_TASK_ROOT</code> – The path to your Lambda function code.</p>
      </li><li class="listitem">
        <p><code class="code">LAMBDA_RUNTIME_DIR</code> – The path to runtime libraries.</p>
      </li></ul></div>
    <p>The following additional environment variables aren't reserved and can be extended in your function
      configuration.</p>
    <div class="itemizedlist">
      <h6>Unreserved environment variables</h6>
       
       
       
       
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><code class="code">LANG</code> – The locale of the runtime (<code class="code">en_US.UTF-8</code>).</p>
      </li><li class="listitem">
        <p><code class="code">PATH</code> – The execution path
          (<code class="code">/usr/local/bin:/usr/bin/:/bin:/opt/bin</code>).</p>
      </li><li class="listitem">
        <p><code class="code">LD_LIBRARY_PATH</code> – The system library path
            (<code class="code">/lib64:/usr/lib64:$LAMBDA_RUNTIME_DIR:$LAMBDA_RUNTIME_DIR/lib:$LAMBDA_TASK_ROOT:$LAMBDA_TASK_ROOT/lib:/opt/lib</code>).</p>
      </li><li class="listitem">
        <p><code class="code">NODE_PATH</code> – (<a href="./lambda-nodejs.html">Node.js</a>) The Node.js library path
            (<code class="code">/opt/nodejs/node12/node_modules/:/opt/nodejs/node_modules:$LAMBDA_RUNTIME_DIR/node_modules</code>).</p>
      </li><li class="listitem">
        <p><code class="code">PYTHONPATH</code> – (<a href="./lambda-python.html">Python 2.7, 3.6, 3.8</a>) The Python
          library path (<code class="code">$LAMBDA_RUNTIME_DIR</code>).</p>
      </li><li class="listitem">
        <p><code class="code">GEM_PATH</code> – (<a href="./lambda-ruby.html">Ruby</a>) The Ruby library path
            (<code class="code">$LAMBDA_TASK_ROOT/vendor/bundle/ruby/2.5.0:/opt/ruby/gems/2.5.0</code>).</p>
      </li><li class="listitem">
        <p><code class="code">AWS_XRAY_CONTEXT_MISSING</code> – For X-Ray tracing, Lambda sets this to
            <code class="code">LOG_ERROR</code> to avoid throwing runtime errors from the X-Ray SDK.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_XRAY_DAEMON_ADDRESS</code> – For X-Ray tracing, the IP address and port of the X-Ray
          daemon.</p>
      </li><li class="listitem">
        <p><code class="code">AWS_LAMBDA_DOTNET_PREJIT</code> – For the .NET 6 and .NET 7 runtimes, set this variable to enable or
          disable .NET specific runtime optimizations. Values include <code class="code">always</code>, <code class="code">never</code>, and
            <code class="code">provisioned-concurrency</code>. For more information, see <a href="./provisioned-concurrency.html">Configuring provisioned concurrency</a>.</p>
      </li><li class="listitem">
        <p><code class="code">TZ</code> – The environment's time zone (<code class="code">UTC</code>). The execution environment uses
          NTP to synchronize the system clock.</p>
      </li></ul></div>
    <p>The sample values shown reflect the latest runtimes. The presence of specific variables or their values can
      vary on earlier runtimes.</p>
   
    <h2 id="configuration-envvars-encryption">Securing environment variables</h2>
    
    <p>For securing your environment variables, you can use server-side encryption to protect your data at rest and
      client-side encryption to protect your data in transit.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>To increase database security, we recommend that you use AWS Secrets Manager instead of environment variables to store
        database credentials. For more information, see <a href="./services-rds.html">Using AWS Lambda with Amazon RDS</a>.</p></div></div>
     
      <h6>Security at rest</h6>
      <p>Lambda always provides server-side encryption at rest with an AWS KMS key. By default, Lambda uses an
        AWS managed key. If this default behavior suits your workflow, you don't need to set up anything else. Lambda
        creates the AWS managed key in your account and manages permissions to it for you. AWS doesn't charge you to
        use this key.</p>
     
    <p>If you prefer, you can provide an AWS KMS customer managed key instead. You might do this to have control over rotation of
      the KMS key or to meet the requirements of your organization for managing KMS keys. When you use a customer managed key,
      only users in your account with access to the KMS key can view or manage environment variables on the
      function.</p>
    <p>Customer managed keys incur standard AWS KMS charges. For more information, see <a href="http://aws.amazon.com/kms/pricing/" rel="noopener noreferrer" target="_blank"><span>AWS Key Management Service pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
     
      <h6>Security in transit</h6>
      <p>For additional security, you can enable helpers for encryption in transit, which ensures that your
        environment variables are encrypted client-side for protection in transit.</p>
     
    <div class="procedure"><h6>To configure encryption for your environment variables</h6><ol><li>
        <p>Use the AWS Key Management Service (AWS KMS) to create any customer managed keys for Lambda to use for server-side and client-side
          encryption. For more information, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/create-keys.html">Creating keys</a> in the
            <em>AWS Key Management Service Developer Guide</em>.</p>
      </li><li>
        <p>Using the Lambda console, navigate to the <b>Edit environment variables</b> page.</p>
        <ol><li><p>Open the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Functions page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of the Lambda console.</p></li><li>
            <p>Choose a function.</p>
          </li><li>
            <p>Choose <b>Configuration</b>, then choose <b>Environment variables</b> from
              the left navigation bar.</p>
          </li><li>
            <p>In the <b>Environment variables</b> section, choose <b>Edit</b>.</p>
          </li><li>
            <p>Expand <b>Encryption configuration</b>.</p>
          </li></ol>
      </li><li>
        <p>(Optional) Enable console encryption helpers to use client-side encryption to protect your data in
          transit.</p>
        <ol><li>
            <p>Under <b>Encryption in transit</b>, choose <b>Enable helpers for encryption in
                transit</b>.</p>
          </li><li>
            <p>For each environment variable that you want to enable console encryption helpers for, choose
                <b>Encrypt</b> next to the environment variable.</p>
          </li><li>
            <p> Under AWS KMS key to encrypt in transit, choose a customer managed key that you created at the beginning of
              this procedure.</p>
          </li><li>
            <p>Choose <b>Execution role policy</b> and copy the policy. This policy grants permission
              to your function's execution role to decrypt the environment variables.</p>
            <p>Save this policy to use in the last step of this procedure.</p>
          </li><li>
            <p>Add code to your function that decrypts the environment variables. To see an example, choose
                <b>Decrypt secrets snippet</b>.</p>
          </li></ol>
      </li><li>
        <p>(Optional) Specify your customer managed key for encryption at rest.</p>
        <ol><li>
            <p>Choose
                <b>Use
                a customer master key</b>.</p>
          </li><li>
            <p>Choose a customer managed key that you created at the beginning of this procedure.</p>
          </li></ol>
      </li><li>
        <p>Choose <b>Save</b>.</p>
      </li><li>
        <p>Set up permissions.</p>
        <p>If you're using a customer managed key with server-side encryption, grant permissions to any users or roles that you
          want to be able to view or manage environment variables on the function. For more information, see <a href="#managing-permissions-to-your-server-side-encryption-key">Managing permissions to your server-side
          encryption KMS key</a>.</p>
        <p>If you're enabling client-side encryption for security in transit, your function needs permission to call
          the <code class="code">kms:Decrypt</code> API operation. Add the policy that you saved previously in this procedure to the
          function's <a href="./lambda-intro-execution-role.html">execution role</a>.</p>
      </li></ol></div>
    
     
      <h3 id="managing-permissions-to-your-server-side-encryption-key">Managing permissions to your server-side
          encryption KMS key</h3>

      <p>No AWS KMS permissions are required for your user or the function's execution role to use the default
        encryption key. To use a customer managed key, you need permission to use the key. Lambda uses your permissions
        to create a grant on the key. This allows Lambda to use it for encryption.</p>
      <div class="itemizedlist">
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><code class="code">kms:ListAliases</code> – To view keys in the Lambda console.</p>
        </li><li class="listitem">
          <p><code class="code">kms:CreateGrant</code>, <code class="code">kms:Encrypt</code> – To configure a customer managed key on a
            function.</p>
        </li><li class="listitem">
          <p><code class="code">kms:Decrypt</code> – To view and manage environment variables that are encrypted with a
            customer managed key.</p>
        </li></ul></div>
      <p>You can get these permissions from your AWS account or from a key's resource-based permissions policy.
        <code class="code">ListAliases</code> is provided by the <a href="./access-control-identity-based.html">managed policies for
          Lambda</a>. Key policies grant the remaining permissions to users in the <b>Key users</b>
        group.</p>
      
      <p>Users without <code class="code">Decrypt</code> permissions can still manage functions, but they can't view environment
        variables or manage them in the Lambda console. To prevent a user from viewing environment variables, add a
        statement to the user's permissions that denies access to the default key, a customer managed key, or all keys.</p>
      <div class="example"><h6>Example IAM policy – Deny access by key ARN</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "VisualEditor0",
            "Effect": "Deny",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": "arn:aws:kms:us-east-2:123456789012:key/3be10e2d-xmpl-4be4-bc9d-0405a71945cc"
        }
    ]
}</code></pre></div></div>
      <div class="mediaobject">
         
          <img src="/images/lambda/latest/dg/images/env-accessdenied.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;          Error message for user without decrypt permissions in the Lambda console.&#xA;        " style="max-width:100%" />
         
         
      </div>
      <p>For details on managing key permissions, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-policies.html">Key policies in AWS KMS</a> in the
          <em>AWS Key Management Service Developer Guide</em>.</p>
     
   
    <h2 id="configuration-envvars-samples">Sample code and templates</h2>
    
    <p>Sample applications in this guide's GitHub repository demonstrate the use of environment variables in function
      code and AWS CloudFormation templates.</p>
    <div class="itemizedlist">
      <h6>Sample applications</h6>
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><a href="./samples-blank.html">Blank function</a> – Create a basic function that shows the use of
          logging, environment variables, AWS X-Ray tracing, layers, unit tests, and the AWS SDK.</p>
      </li><li class="listitem">
        <p><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/rds-mysql" rel="noopener noreferrer" target="_blank"><span>RDS MySQL</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – Create a VPC and an Amazon Relational Database Service (Amazon RDS) DB
          instance in one template, with a password stored in Secrets Manager. In the application template, import database
          details from the VPC stack, read the password from Secrets Manager, and pass all connection configuration to the
          function in environment variables.</p>
      </li></ul></div>
    
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./configuration-function-common.html">Configuring function options</div><div id="next" class="next-link" accesskey="n" href="./configuration-vpc.html">Outbound networking</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-envvars.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/configuration-envvars.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>